2025-11-14 16:53:39,004 - INFO - __main__ 176 - Script iniciado directamente.
2025-11-14 16:53:39,004 - INFO - __main__ 47 - Inicio de ejecucion.
2025-11-14 16:53:39,005 - INFO - __main__ 49 - N√∫mero de trials por estudio: 25
2025-11-14 16:53:39,005 - INFO - __main__ 57 - === CREACION DE CLASE TERNARIA EN GCS ===
2025-11-14 16:53:44,766 - INFO - __main__ 61 - === INICIO DE DATA QUALITY - INTERPOLACION DE DATOS FALTANTES ===
2025-11-14 16:53:48,980 - INFO - __main__ 78 - Archivo de features encontrado: gs://guijomter_bukito3/Compe_02/data/df_fe_Compe_02_V3_2ob_ss001.parquet. Cargando desde GCS.
2025-11-14 16:53:49,088 - INFO - src.bucket_utils_p 86 - Descargando de GCS: gs://guijomter_bukito3/Compe_02/data/df_fe_Compe_02_V3_2ob_ss001.parquet
2025-11-14 16:55:25,375 - INFO - src.bucket_utils_p 90 - Descargado en: /tmp/df_fe_Compe_02_V3_2ob_ss001.parquet
2025-11-14 16:55:42,083 - INFO - src.bucket_utils_p 94 - DataFrame cargado en memoria.
2025-11-14 16:55:42,827 - INFO - src.bucket_utils_p 101 - Archivo temporal /tmp/df_fe_Compe_02_V3_2ob_ss001.parquet eliminado.
2025-11-14 16:55:42,844 - INFO - __main__ 101 - Feature Engineering completado: (4717958, 1005)
2025-11-14 16:55:42,845 - INFO - src.optimization_p 838 - Iniciando optimizaci√≥n con 25 trials
2025-11-14 16:55:42,845 - INFO - src.optimization_p 839 - Configuraci√≥n: TRAIN=['201901', '201902', '201903', '201904', '201905', '201906', '201907', '201908', '201909', '201911', '201912', '202001', '202002', '202011', '202012'], VALID=202102, SEMILLA=[839071, 666557]
2025-11-14 16:55:43,031 - INFO - src.optimization_p 798 - üÜï No se encontr√≥ base de datos previa
2025-11-14 16:55:43,032 - INFO - src.optimization_p 799 - üìÅ Creando nueva base de datos: /home/guijomter/buckets/b1/Compe_02/optuna_db/Compe_02_V3_2ob_ss001.db
2025-11-14 16:56:14,790 - INFO - src.optimization_p 810 - ‚úÖ Nuevo estudio creado: Compe_02_V3_2ob_ss001
2025-11-14 16:56:14,791 - INFO - src.optimization_p 811 - üíæ Storage: sqlite:////home/guijomter/buckets/b1/Compe_02/optuna_db/Compe_02_V3_2ob_ss001.db
2025-11-14 16:56:15,005 - INFO - src.optimization_p 852 - üÜï Nueva optimizaci√≥n: 25 trials
2025-11-14 16:56:50,073 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102133 (CMay : 83580 / CMin: 18553)
2025-11-14 16:58:33,776 - INFO - src.optimization_p 133 - Iteraci√≥n 0 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 16:58:33,778 - INFO - src.optimization_p 134 - Ganancia: 201,169,782---Par√°metros: {params}
2025-11-14 16:58:33,778 - INFO - src.optimization_p 709 - Trial 0: Ganancia Media = 201,169,782, Ganancia Max = 207,272,000, Envios Max Gan = 9,163
2025-11-14 16:59:03,943 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102468 (CMay : 83915 / CMin: 18553)
2025-11-14 17:00:33,933 - INFO - src.optimization_p 133 - Iteraci√≥n 1 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:00:33,934 - INFO - src.optimization_p 134 - Ganancia: 249,931,740---Par√°metros: {params}
2025-11-14 17:00:33,935 - INFO - src.optimization_p 709 - Trial 1: Ganancia Media = 249,931,740, Ganancia Max = 253,032,000, Envios Max Gan = 11,283
2025-11-14 17:01:04,124 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102146 (CMay : 83593 / CMin: 18553)
2025-11-14 17:01:45,328 - INFO - src.optimization_p 133 - Iteraci√≥n 2 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:01:45,329 - INFO - src.optimization_p 134 - Ganancia: 224,966,669---Par√°metros: {params}
2025-11-14 17:01:45,330 - INFO - src.optimization_p 709 - Trial 2: Ganancia Media = 224,966,669, Ganancia Max = 228,916,000, Envios Max Gan = 9,833
2025-11-14 17:02:15,315 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102229 (CMay : 83676 / CMin: 18553)
2025-11-14 17:03:25,732 - INFO - src.optimization_p 133 - Iteraci√≥n 3 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:03:25,733 - INFO - src.optimization_p 134 - Ganancia: 237,764,080---Par√°metros: {params}
2025-11-14 17:03:25,733 - INFO - src.optimization_p 709 - Trial 3: Ganancia Media = 237,764,080, Ganancia Max = 241,364,000, Envios Max Gan = 11,987
2025-11-14 17:03:55,417 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102448 (CMay : 83895 / CMin: 18553)
2025-11-14 17:05:17,750 - INFO - src.optimization_p 133 - Iteraci√≥n 4 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:05:17,751 - INFO - src.optimization_p 134 - Ganancia: 213,332,340---Par√°metros: {params}
2025-11-14 17:05:17,751 - INFO - src.optimization_p 709 - Trial 4: Ganancia Media = 213,332,340, Ganancia Max = 216,552,000, Envios Max Gan = 10,211
2025-11-14 17:05:48,245 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102537 (CMay : 83984 / CMin: 18553)
2025-11-14 17:07:31,211 - INFO - src.optimization_p 133 - Iteraci√≥n 5 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:07:31,212 - INFO - src.optimization_p 134 - Ganancia: 248,215,540---Par√°metros: {params}
2025-11-14 17:07:31,212 - INFO - src.optimization_p 709 - Trial 5: Ganancia Media = 248,215,540, Ganancia Max = 251,116,000, Envios Max Gan = 10,331
2025-11-14 17:08:00,630 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102710 (CMay : 84157 / CMin: 18553)
2025-11-14 17:09:23,912 - INFO - src.optimization_p 133 - Iteraci√≥n 6 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:09:23,912 - INFO - src.optimization_p 134 - Ganancia: 215,654,689---Par√°metros: {params}
2025-11-14 17:09:23,913 - INFO - src.optimization_p 709 - Trial 6: Ganancia Media = 215,654,689, Ganancia Max = 219,304,000, Envios Max Gan = 10,202
2025-11-14 17:09:53,206 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102611 (CMay : 84058 / CMin: 18553)
2025-11-14 17:11:24,747 - INFO - src.optimization_p 133 - Iteraci√≥n 7 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:11:24,748 - INFO - src.optimization_p 134 - Ganancia: 244,605,447---Par√°metros: {params}
2025-11-14 17:11:24,749 - INFO - src.optimization_p 709 - Trial 7: Ganancia Media = 244,605,447, Ganancia Max = 248,132,000, Envios Max Gan = 10,272
2025-11-14 17:11:53,665 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=101982 (CMay : 83429 / CMin: 18553)
2025-11-14 17:12:37,615 - INFO - src.optimization_p 133 - Iteraci√≥n 8 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:12:37,616 - INFO - src.optimization_p 134 - Ganancia: 236,146,765---Par√°metros: {params}
2025-11-14 17:12:37,616 - INFO - src.optimization_p 709 - Trial 8: Ganancia Media = 236,146,765, Ganancia Max = 239,232,000, Envios Max Gan = 10,765
2025-11-14 17:13:06,416 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102669 (CMay : 84116 / CMin: 18553)
2025-11-14 17:13:55,744 - INFO - src.optimization_p 133 - Iteraci√≥n 9 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:13:55,745 - INFO - src.optimization_p 134 - Ganancia: 257,707,616---Par√°metros: {params}
2025-11-14 17:13:55,745 - INFO - src.optimization_p 709 - Trial 9: Ganancia Media = 257,707,616, Ganancia Max = 260,844,000, Envios Max Gan = 10,429
2025-11-14 17:14:24,467 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102116 (CMay : 83563 / CMin: 18553)
2025-11-14 17:15:03,726 - INFO - src.optimization_p 133 - Iteraci√≥n 10 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:15:03,727 - INFO - src.optimization_p 134 - Ganancia: 227,005,207---Par√°metros: {params}
2025-11-14 17:15:03,727 - INFO - src.optimization_p 709 - Trial 10: Ganancia Media = 227,005,207, Ganancia Max = 230,452,000, Envios Max Gan = 10,212
2025-11-14 17:15:32,397 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102480 (CMay : 83927 / CMin: 18553)
2025-11-14 17:16:14,414 - INFO - src.optimization_p 133 - Iteraci√≥n 11 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:16:14,414 - INFO - src.optimization_p 134 - Ganancia: 222,030,985---Par√°metros: {params}
2025-11-14 17:16:14,415 - INFO - src.optimization_p 709 - Trial 11: Ganancia Media = 222,030,985, Ganancia Max = 225,176,000, Envios Max Gan = 10,212
2025-11-14 17:16:43,542 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102316 (CMay : 83763 / CMin: 18553)
2025-11-14 17:17:15,206 - INFO - src.optimization_p 133 - Iteraci√≥n 12 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:17:15,207 - INFO - src.optimization_p 134 - Ganancia: 232,266,565---Par√°metros: {params}
2025-11-14 17:17:15,207 - INFO - src.optimization_p 709 - Trial 12: Ganancia Media = 232,266,565, Ganancia Max = 235,472,000, Envios Max Gan = 10,049
2025-11-14 17:17:43,930 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102171 (CMay : 83618 / CMin: 18553)
2025-11-14 17:18:54,741 - INFO - src.optimization_p 133 - Iteraci√≥n 13 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:18:54,742 - INFO - src.optimization_p 134 - Ganancia: 255,309,391---Par√°metros: {params}
2025-11-14 17:18:54,742 - INFO - src.optimization_p 709 - Trial 13: Ganancia Media = 255,309,391, Ganancia Max = 258,460,000, Envios Max Gan = 11,116
2025-11-14 17:19:23,172 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102402 (CMay : 83849 / CMin: 18553)
2025-11-14 17:21:07,473 - INFO - src.optimization_p 133 - Iteraci√≥n 14 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:21:07,474 - INFO - src.optimization_p 134 - Ganancia: 245,566,749---Par√°metros: {params}
2025-11-14 17:21:07,474 - INFO - src.optimization_p 709 - Trial 14: Ganancia Media = 245,566,749, Ganancia Max = 248,156,000, Envios Max Gan = 9,783
2025-11-14 17:21:36,379 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102548 (CMay : 83995 / CMin: 18553)
2025-11-14 17:22:11,122 - INFO - src.optimization_p 133 - Iteraci√≥n 15 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:22:11,122 - INFO - src.optimization_p 134 - Ganancia: 239,107,512---Par√°metros: {params}
2025-11-14 17:22:11,123 - INFO - src.optimization_p 709 - Trial 15: Ganancia Media = 239,107,512, Ganancia Max = 241,980,000, Envios Max Gan = 11,116
2025-11-14 17:22:39,923 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102180 (CMay : 83627 / CMin: 18553)
2025-11-14 17:23:43,365 - INFO - src.optimization_p 133 - Iteraci√≥n 16 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:23:43,415 - INFO - src.optimization_p 134 - Ganancia: 237,072,907---Par√°metros: {params}
2025-11-14 17:23:43,416 - INFO - src.optimization_p 709 - Trial 16: Ganancia Media = 237,072,907, Ganancia Max = 240,380,000, Envios Max Gan = 11,004
2025-11-14 17:24:12,671 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102143 (CMay : 83590 / CMin: 18553)
2025-11-14 17:25:27,985 - INFO - src.optimization_p 133 - Iteraci√≥n 17 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:25:27,985 - INFO - src.optimization_p 134 - Ganancia: 230,626,334---Par√°metros: {params}
2025-11-14 17:25:27,985 - INFO - src.optimization_p 709 - Trial 17: Ganancia Media = 230,626,334, Ganancia Max = 233,280,000, Envios Max Gan = 10,887
2025-11-14 17:26:01,091 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102234 (CMay : 83681 / CMin: 18553)
2025-11-14 17:26:54,859 - INFO - src.optimization_p 133 - Iteraci√≥n 18 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:26:54,859 - INFO - src.optimization_p 134 - Ganancia: 236,334,414---Par√°metros: {params}
2025-11-14 17:26:54,860 - INFO - src.optimization_p 709 - Trial 18: Ganancia Media = 236,334,414, Ganancia Max = 240,188,000, Envios Max Gan = 9,718
2025-11-14 17:27:26,957 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102227 (CMay : 83674 / CMin: 18553)
2025-11-14 17:28:22,793 - INFO - src.optimization_p 133 - Iteraci√≥n 19 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:28:22,794 - INFO - src.optimization_p 134 - Ganancia: 242,530,621---Par√°metros: {params}
2025-11-14 17:28:22,795 - INFO - src.optimization_p 709 - Trial 19: Ganancia Media = 242,530,621, Ganancia Max = 245,472,000, Envios Max Gan = 11,885
2025-11-14 17:28:56,820 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102367 (CMay : 83814 / CMin: 18553)
2025-11-14 17:30:21,282 - INFO - src.optimization_p 133 - Iteraci√≥n 20 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:30:21,283 - INFO - src.optimization_p 134 - Ganancia: 228,366,865---Par√°metros: {params}
2025-11-14 17:30:21,283 - INFO - src.optimization_p 709 - Trial 20: Ganancia Media = 228,366,865, Ganancia Max = 231,552,000, Envios Max Gan = 11,701
2025-11-14 17:30:53,676 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102355 (CMay : 83802 / CMin: 18553)
2025-11-14 17:32:17,681 - INFO - src.optimization_p 133 - Iteraci√≥n 21 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:32:17,682 - INFO - src.optimization_p 134 - Ganancia: 244,904,076---Par√°metros: {params}
2025-11-14 17:32:17,683 - INFO - src.optimization_p 709 - Trial 21: Ganancia Media = 244,904,076, Ganancia Max = 248,020,000, Envios Max Gan = 11,238
2025-11-14 17:32:50,541 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102425 (CMay : 83872 / CMin: 18553)
2025-11-14 17:34:34,935 - INFO - src.optimization_p 133 - Iteraci√≥n 22 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:34:34,936 - INFO - src.optimization_p 134 - Ganancia: 239,247,385---Par√°metros: {params}
2025-11-14 17:34:34,937 - INFO - src.optimization_p 709 - Trial 22: Ganancia Media = 239,247,385, Ganancia Max = 241,832,000, Envios Max Gan = 11,851
2025-11-14 17:35:05,773 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102422 (CMay : 83869 / CMin: 18553)
2025-11-14 17:36:15,320 - INFO - src.optimization_p 133 - Iteraci√≥n 23 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:36:15,321 - INFO - src.optimization_p 134 - Ganancia: 247,289,530---Par√°metros: {params}
2025-11-14 17:36:15,321 - INFO - src.optimization_p 709 - Trial 23: Ganancia Media = 247,289,530, Ganancia Max = 250,580,000, Envios Max Gan = 11,238
2025-11-14 17:36:46,315 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2043630 (C May: 2025077 / C Min: 18553), registros finales=102294 (CMay : 83741 / CMin: 18553)
2025-11-14 17:38:13,817 - INFO - src.optimization_p 133 - Iteraci√≥n 24 guardada en resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:38:13,817 - INFO - src.optimization_p 134 - Ganancia: 251,534,989---Par√°metros: {params}
2025-11-14 17:38:13,818 - INFO - src.optimization_p 709 - Trial 24: Ganancia Media = 251,534,989, Ganancia Max = 254,524,000, Envios Max Gan = 11,161
2025-11-14 17:38:18,729 - INFO - src.optimization_p 858 - üèÜ Mejor ganancia: 257,707,616
2025-11-14 17:38:19,701 - INFO - src.optimization_p 859 - Mejores par√°metros: {'num_iterations': 777, 'num_leaves': 164, 'learning_rate': 0.13472508999466914, 'feature_fraction': 0.6514357957556239, 'min_child_samples': 5, 'max_depth': 8, 'reg_lambda': 7.928079259493476, 'reg_alpha': 8.314604847532115, 'min_gain_to_split': 1.4888933178976078, 'is_unbalance': False}
2025-11-14 17:38:19,701 - INFO - __main__ 108 - === AN√ÅLISIS DE RESULTADOS ===
2025-11-14 17:38:21,162 - INFO - __main__ 112 - Top 5 mejores trials:
2025-11-14 17:38:21,164 - INFO - __main__ 114 -   Trial 9: 257,707,616
2025-11-14 17:38:21,164 - INFO - __main__ 114 -   Trial 13: 255,309,391
2025-11-14 17:38:21,165 - INFO - __main__ 114 -   Trial 24: 251,534,989
2025-11-14 17:38:21,165 - INFO - __main__ 114 -   Trial 1: 249,931,740
2025-11-14 17:38:21,165 - INFO - __main__ 114 -   Trial 5: 248,215,540
2025-11-14 17:38:21,166 - INFO - __main__ 116 - === OPTIMIZACI√ìN COMPLETADA ===
2025-11-14 17:38:21,166 - INFO - __main__ 119 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-11-14 17:38:21,167 - INFO - src.best_params 49 - Mejores hiperpar√°metros cargados desde resultados/Compe_02_V3_2ob_ss001_iteraciones.json
2025-11-14 17:38:21,167 - INFO - src.best_params 50 - Mejor ganancia encontrada: 257,707,616
2025-11-14 17:38:21,167 - INFO - src.best_params 51 - Trial n√∫mero: 9
2025-11-14 17:38:21,167 - INFO - src.best_params 52 - Par√°metros: {'num_iterations': 777, 'num_leaves': 164, 'learning_rate': 0.13472508999466914, 'feature_fraction': 0.6514357957556239, 'min_child_samples': 5, 'max_depth': 8, 'reg_lambda': 7.928079259493476, 'reg_alpha': 8.314604847532115, 'min_gain_to_split': 1.4888933178976078, 'is_unbalance': False, 'bagging_freq': 1, 'objective': 'binary', 'metric': 'None', 'random_state': 839071}
2025-11-14 17:38:21,168 - INFO - src.optimization_p 452 - === EVALUACI√ìN EN CONJUNTO DE TEST (Promediando N Modelos) ===
2025-11-14 17:38:21,168 - INFO - src.optimization_p 465 - Per√≠odos de test a evaluar: ['202104', '202106']
2025-11-14 17:38:21,168 - INFO - src.optimization_p 466 - Semilla base: 839071, N Modelos: 5
2025-11-14 17:38:27,163 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2205785 (C May: 2185369 / C Min: 20416), registros finales=127600 (CMay : 107184 / CMin: 20416)
2025-11-14 17:38:28,144 - INFO - src.optimization_p 481 - Dimensiones df_train_completo: (127600, 1005)
2025-11-14 17:38:28,416 - INFO - src.optimization_p 489 - Tipo de dato de train_data: <class 'lightgbm.basic.Dataset'>, Dimensiones de train_data: (127600, 1003)
2025-11-14 17:38:28,418 - INFO - src.optimization_p 494 - Iniciando entrenamiento de 5 modelos...
2025-11-14 17:38:28,420 - INFO - src.optimization_p 504 - Entrenando modelo 1/5 (Semilla: 3060817664)...
2025-11-14 17:39:10,997 - INFO - src.optimization_p 504 - Entrenando modelo 2/5 (Semilla: 992140286)...
2025-11-14 17:39:47,727 - INFO - src.optimization_p 504 - Entrenando modelo 3/5 (Semilla: 3237557171)...
2025-11-14 17:40:23,190 - INFO - src.optimization_p 504 - Entrenando modelo 4/5 (Semilla: 2314383897)...
2025-11-14 17:40:58,997 - INFO - src.optimization_p 504 - Entrenando modelo 5/5 (Semilla: 404200786)...
2025-11-14 17:41:36,443 - INFO - src.optimization_p 524 - Entrenamiento de los N modelos completado.
2025-11-14 17:41:36,444 - INFO - src.optimization_p 531 - --- Evaluando en Per√≠odo de Test: 202104 ---
2025-11-14 17:41:37,805 - INFO - src.optimization_p 540 - Dimensiones df_test (202104): (163418, 1005)
2025-11-14 17:41:52,293 - INFO - src.optimization_p 570 - Predicciones completadas para el mes 202104. Promediando...
2025-11-14 17:41:52,381 - INFO - src.optimization_p 601 - Resultados Test Mes 202104 (N=5): Ganancia Suavizada = 355,777,123, Ganancia M√°xima = 359,300,000, Envios M√°x Gan = 11594
2025-11-14 17:41:52,382 - INFO - src.optimization_p 531 - --- Evaluando en Per√≠odo de Test: 202106 ---
2025-11-14 17:41:54,141 - INFO - src.optimization_p 540 - Dimensiones df_test (202106): (164313, 1005)
2025-11-14 17:42:05,216 - INFO - src.optimization_p 570 - Predicciones completadas para el mes 202106. Promediando...
2025-11-14 17:42:05,312 - INFO - src.optimization_p 601 - Resultados Test Mes 202106 (N=5): Ganancia Suavizada = 359,130,330, Ganancia M√°xima = 361,460,000, Envios M√°x Gan = 14646
2025-11-14 17:42:05,313 - INFO - src.optimization_p 608 - === EVALUACI√ìN EN CONJUNTO DE TEST COMPLETADA ===
2025-11-14 17:42:05,588 - INFO - src.optimization_p 322 - Mes 202104 -> Ganancia suavizada: 355,777,123---Ganancia m√°xima: 359,300,000
2025-11-14 17:42:05,590 - INFO - src.optimization_p 322 - Mes 202106 -> Ganancia suavizada: 359,130,330---Ganancia m√°xima: 361,460,000
2025-11-14 17:42:05,889 - INFO - src.optimization_p 336 - Resultados de 2 mes(es) guardados en /home/guijomter/buckets/b1/Compe_02/resultados/Compe_02_V3_2ob_ss001_resultado_test.json
2025-11-14 17:42:05,890 - INFO - __main__ 131 - === RESUMEN DE EVALUACI√ìN EN TEST ===
2025-11-14 17:42:05,890 - INFO - __main__ 138 - --- Mes: 202104 ---
2025-11-14 17:42:05,891 - INFO - __main__ 139 -   ‚úÖ Ganancia suavizada: 355,777,123
2025-11-14 17:42:05,892 - INFO - __main__ 140 -   ‚úÖ Ganancia m√°xima: 359,300,000
2025-11-14 17:42:05,892 - INFO - __main__ 141 -   üîç Env√≠os de m√°x. ganancia: 11,594
2025-11-14 17:42:05,893 - INFO - __main__ 138 - --- Mes: 202106 ---
2025-11-14 17:42:05,894 - INFO - __main__ 139 -   ‚úÖ Ganancia suavizada: 359,130,330
2025-11-14 17:42:05,894 - INFO - __main__ 140 -   ‚úÖ Ganancia m√°xima: 361,460,000
2025-11-14 17:42:05,895 - INFO - __main__ 141 -   üîç Env√≠os de m√°x. ganancia: 14,646
2025-11-14 17:42:05,895 - INFO - __main__ 144 - === ENTRENAMIENTO FINAL ===
2025-11-14 17:42:05,896 - INFO - __main__ 145 - Preparar datos para entrenamiento final
2025-11-14 17:42:05,896 - INFO - src.final_training_p 378 - Preparando datos para entrenamiento final
2025-11-14 17:42:05,897 - INFO - src.final_training_p 379 - Per√≠odos de entrenamiento: ['201901', '201902', '201903', '201904', '201905', '201906', '201907', '201908', '201909', '201911', '201912', '202001', '202002', '202101', '202102', '202103', '202104']
2025-11-14 17:42:05,897 - INFO - src.final_training_p 380 - Per√≠odo de predicci√≥n: 202108
2025-11-14 17:42:10,752 - INFO - src.final_training_p 392 - Registros de entrenamiento: 2,372,592
2025-11-14 17:42:10,753 - INFO - src.final_training_p 393 - Registros de predicci√≥n: 164,822
2025-11-14 17:42:16,731 - INFO - src.optimization_p 1031 - Undersampling aplicado: tasa=0.01, registros originales=2372592 (C May: 2348967 / C Min: 23625), registros finales=143162 (CMay : 119537 / CMin: 23625)
2025-11-14 17:42:18,728 - INFO - src.final_training_p 408 - Features utilizadas: 1,003
2025-11-14 17:42:18,732 - INFO - src.final_training_p 409 - Distribuci√≥n del target - 0: 119,537, 1: 23,625
2025-11-14 17:42:18,779 - INFO - __main__ 150 - Entrenar modelo final
2025-11-14 17:42:18,780 - INFO - src.final_training_p 250 - Iniciando entrenamiento de 5 modelos finales (base: 839071)
2025-11-14 17:42:18,781 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 3060817664...
2025-11-14 17:43:14,288 - INFO - src.final_training_p 296 - Modelo final (semilla 3060817664) guardado en: resultados/Compe_02_V3_2ob_ss001/modelo_final_semilla_3060817664_2025-11-14_17-43-14.txt
2025-11-14 17:43:14,289 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 992140286...
2025-11-14 17:43:59,068 - INFO - src.final_training_p 296 - Modelo final (semilla 992140286) guardado en: resultados/Compe_02_V3_2ob_ss001/modelo_final_semilla_992140286_2025-11-14_17-43-59.txt
2025-11-14 17:43:59,069 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 3237557171...
2025-11-14 17:44:37,109 - INFO - src.final_training_p 296 - Modelo final (semilla 3237557171) guardado en: resultados/Compe_02_V3_2ob_ss001/modelo_final_semilla_3237557171_2025-11-14_17-44-37.txt
2025-11-14 17:44:37,110 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 2314383897...
2025-11-14 17:45:12,477 - INFO - src.final_training_p 296 - Modelo final (semilla 2314383897) guardado en: resultados/Compe_02_V3_2ob_ss001/modelo_final_semilla_2314383897_2025-11-14_17-45-12.txt
2025-11-14 17:45:12,478 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 404200786...
2025-11-14 17:45:48,379 - INFO - src.final_training_p 296 - Modelo final (semilla 404200786) guardado en: resultados/Compe_02_V3_2ob_ss001/modelo_final_semilla_404200786_2025-11-14_17-45-48.txt
2025-11-14 17:45:48,380 - INFO - src.final_training_p 301 - Entrenamiento de 5 modelos finales completado.
2025-11-14 17:45:48,384 - INFO - __main__ 154 - Generar predicciones finales
2025-11-14 17:45:48,384 - CRITICAL - __main__ 180 - Ejecuci√≥n fallida con una excepci√≥n no controlada.
Traceback (most recent call last):
  File "/home/guijomter/Project_Wednesday/main.py", line 178, in <module>
    main()
    ~~~~^^
  File "/home/guijomter/Project_Wednesday/main.py", line 155, in main
    resultados = generar_predicciones_finales_seeds(modelos_finales, X_predict, clientes_predict, resultados_test['porcentaje_envios_max_gan'])
                                                                                                  ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'porcentaje_envios_max_gan'
2025-11-14 17:45:48,537 - INFO - __main__ 182 - Ejecuci√≥n finalizada.
