2025-11-16 04:49:31,880 - INFO - __main__ 189 - Script iniciado directamente.
2025-11-16 04:49:31,881 - INFO - __main__ 49 - Inicio de ejecucion.
2025-11-16 04:49:31,881 - INFO - __main__ 51 - N√∫mero de trials por estudio: 20
2025-11-16 04:49:31,881 - INFO - __main__ 59 - === CREACION DE CLASE TERNARIA EN GCS ===
2025-11-16 04:49:35,708 - INFO - __main__ 63 - === INICIO DE DATA QUALITY - INTERPOLACION DE DATOS FALTANTES ===
2025-11-16 04:49:39,652 - INFO - __main__ 80 - Archivo de features encontrado: gs://guijomter_bukito3/Compe_02/data/df_fe_Compe_02_V4_2ob_ss03.parquet. Cargando desde GCS.
2025-11-16 04:49:39,766 - INFO - src.bucket_utils_p 86 - Descargando de GCS: gs://guijomter_bukito3/Compe_02/data/df_fe_Compe_02_V4_2ob_ss03.parquet
2025-11-16 04:51:13,590 - INFO - src.bucket_utils_p 90 - Descargado en: /tmp/df_fe_Compe_02_V4_2ob_ss03.parquet
2025-11-16 04:51:29,573 - INFO - src.bucket_utils_p 94 - DataFrame cargado en memoria.
2025-11-16 04:51:29,574 - INFO - src.bucket_utils_p 101 - Archivo temporal /tmp/df_fe_Compe_02_V4_2ob_ss03.parquet eliminado.
2025-11-16 04:51:29,574 - INFO - __main__ 103 - Feature Engineering completado: (4717958, 1005)
2025-11-16 04:51:29,575 - INFO - src.optimization_p 1116 - Iniciando optimizaci√≥n con 20 trials
2025-11-16 04:51:29,575 - INFO - src.optimization_p 1117 - Configuraci√≥n: TRAIN=['201901', '201902', '201903', '201904', '201905', '201906', '201907', '201908', '201909', '201910', '201911', '201912', '202001', '202002', '202003', '202004', '202005', '202007', '202008', '202009', '202010', '202011', '202012', '202101'], VALID=202102, SEMILLA=[839071, 666557]
2025-11-16 04:51:29,784 - INFO - src.optimization_p 1076 - üÜï No se encontr√≥ base de datos previa
2025-11-16 04:51:29,784 - INFO - src.optimization_p 1077 - üìÅ Creando nueva base de datos: /home/guijomter/buckets/b1/Compe_02/optuna_db/Compe_02_V4_2ob_ss03.db
2025-11-16 04:51:59,143 - INFO - src.optimization_p 1088 - ‚úÖ Nuevo estudio creado: Compe_02_V4_2ob_ss03
2025-11-16 04:51:59,143 - INFO - src.optimization_p 1089 - üíæ Storage: sqlite:////home/guijomter/buckets/b1/Compe_02/optuna_db/Compe_02_V4_2ob_ss03.db
2025-11-16 04:51:59,354 - INFO - src.optimization_p 1130 - üÜï Nueva optimizaci√≥n: 20 trials
2025-11-16 04:52:19,501 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1148420 (CMay : 1120482 / CMin: 27938)
2025-11-16 04:59:32,421 - INFO - src.optimization_p 134 - Iteraci√≥n 0 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 04:59:32,422 - INFO - src.optimization_p 135 - Ganancia: 264,042,111---Par√°metros: {params}
2025-11-16 04:59:32,422 - INFO - src.optimization_p 987 - Trial 0: Ganancia Media = 264,042,111, Ganancia Max = 269,704,000, Envios Max Gan = 9,026
2025-11-16 05:00:02,295 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1149655 (CMay : 1121717 / CMin: 27938)
2025-11-16 05:06:25,631 - INFO - src.optimization_p 134 - Iteraci√≥n 1 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 05:06:25,632 - INFO - src.optimization_p 135 - Ganancia: 262,060,110---Par√°metros: {params}
2025-11-16 05:06:25,632 - INFO - src.optimization_p 987 - Trial 1: Ganancia Media = 262,060,110, Ganancia Max = 266,120,000, Envios Max Gan = 11,045
2025-11-16 05:06:50,901 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1150034 (CMay : 1122096 / CMin: 27938)
2025-11-16 05:13:32,057 - INFO - src.optimization_p 134 - Iteraci√≥n 2 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 05:13:32,058 - INFO - src.optimization_p 135 - Ganancia: 258,058,311---Par√°metros: {params}
2025-11-16 05:13:32,059 - INFO - src.optimization_p 987 - Trial 2: Ganancia Media = 258,058,311, Ganancia Max = 262,840,000, Envios Max Gan = 9,313
2025-11-16 05:13:56,879 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1149578 (CMay : 1121640 / CMin: 27938)
2025-11-16 05:21:49,692 - INFO - src.optimization_p 134 - Iteraci√≥n 3 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 05:21:49,693 - INFO - src.optimization_p 135 - Ganancia: 249,120,970---Par√°metros: {params}
2025-11-16 05:21:49,693 - INFO - src.optimization_p 987 - Trial 3: Ganancia Media = 249,120,970, Ganancia Max = 254,100,000, Envios Max Gan = 9,254
2025-11-16 05:22:14,482 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1149929 (CMay : 1121991 / CMin: 27938)
2025-11-16 05:27:58,644 - INFO - src.optimization_p 134 - Iteraci√≥n 4 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 05:27:58,645 - INFO - src.optimization_p 135 - Ganancia: 260,910,427---Par√°metros: {params}
2025-11-16 05:27:58,645 - INFO - src.optimization_p 987 - Trial 4: Ganancia Media = 260,910,427, Ganancia Max = 265,604,000, Envios Max Gan = 9,615
2025-11-16 05:28:21,355 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1149291 (CMay : 1121353 / CMin: 27938)
2025-11-16 05:34:56,501 - INFO - src.optimization_p 134 - Iteraci√≥n 5 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 05:34:56,502 - INFO - src.optimization_p 135 - Ganancia: 251,426,801---Par√°metros: {params}
2025-11-16 05:34:56,502 - INFO - src.optimization_p 987 - Trial 5: Ganancia Media = 251,426,801, Ganancia Max = 255,908,000, Envios Max Gan = 9,980
2025-11-16 05:35:20,458 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1147120 (CMay : 1119182 / CMin: 27938)
2025-11-16 05:39:35,042 - INFO - src.optimization_p 134 - Iteraci√≥n 6 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 05:39:35,043 - INFO - src.optimization_p 135 - Ganancia: 177,649,665---Par√°metros: {params}
2025-11-16 05:39:35,044 - INFO - src.optimization_p 987 - Trial 6: Ganancia Media = 177,649,665, Ganancia Max = 182,580,000, Envios Max Gan = 12,070
2025-11-16 05:39:57,878 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1147865 (CMay : 1119927 / CMin: 27938)
2025-11-16 05:46:37,899 - INFO - src.optimization_p 134 - Iteraci√≥n 7 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 05:46:37,900 - INFO - src.optimization_p 135 - Ganancia: 263,685,935---Par√°metros: {params}
2025-11-16 05:46:37,900 - INFO - src.optimization_p 987 - Trial 7: Ganancia Media = 263,685,935, Ganancia Max = 268,356,000, Envios Max Gan = 10,829
2025-11-16 05:47:11,652 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1150388 (CMay : 1122450 / CMin: 27938)
2025-11-16 05:54:36,095 - INFO - src.optimization_p 134 - Iteraci√≥n 8 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 05:54:36,096 - INFO - src.optimization_p 135 - Ganancia: 249,528,142---Par√°metros: {params}
2025-11-16 05:54:36,096 - INFO - src.optimization_p 987 - Trial 8: Ganancia Media = 249,528,142, Ganancia Max = 254,772,000, Envios Max Gan = 9,204
2025-11-16 05:54:59,964 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1150923 (CMay : 1122985 / CMin: 27938)
2025-11-16 06:00:52,798 - INFO - src.optimization_p 134 - Iteraci√≥n 9 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 06:00:52,799 - INFO - src.optimization_p 135 - Ganancia: 265,997,615---Par√°metros: {params}
2025-11-16 06:00:52,799 - INFO - src.optimization_p 987 - Trial 9: Ganancia Media = 265,997,615, Ganancia Max = 270,828,000, Envios Max Gan = 9,594
2025-11-16 06:01:15,770 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1150600 (CMay : 1122662 / CMin: 27938)
2025-11-16 06:07:05,401 - INFO - src.optimization_p 134 - Iteraci√≥n 10 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 06:07:05,402 - INFO - src.optimization_p 135 - Ganancia: 201,239,562---Par√°metros: {params}
2025-11-16 06:07:05,402 - INFO - src.optimization_p 987 - Trial 10: Ganancia Media = 201,239,562, Ganancia Max = 204,844,000, Envios Max Gan = 10,461
2025-11-16 06:07:28,685 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1148867 (CMay : 1120929 / CMin: 27938)
2025-11-16 06:14:55,052 - INFO - src.optimization_p 134 - Iteraci√≥n 11 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 06:14:55,053 - INFO - src.optimization_p 135 - Ganancia: 265,274,165---Par√°metros: {params}
2025-11-16 06:14:55,053 - INFO - src.optimization_p 987 - Trial 11: Ganancia Media = 265,274,165, Ganancia Max = 270,564,000, Envios Max Gan = 9,807
2025-11-16 06:15:18,945 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1148468 (CMay : 1120530 / CMin: 27938)
2025-11-16 06:21:27,202 - INFO - src.optimization_p 134 - Iteraci√≥n 12 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 06:21:27,203 - INFO - src.optimization_p 135 - Ganancia: 265,438,917---Par√°metros: {params}
2025-11-16 06:21:27,203 - INFO - src.optimization_p 987 - Trial 12: Ganancia Media = 265,438,917, Ganancia Max = 269,832,000, Envios Max Gan = 10,387
2025-11-16 06:21:48,919 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1148875 (CMay : 1120937 / CMin: 27938)
2025-11-16 06:27:16,352 - INFO - src.optimization_p 134 - Iteraci√≥n 13 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 06:27:16,353 - INFO - src.optimization_p 135 - Ganancia: 264,463,010---Par√°metros: {params}
2025-11-16 06:27:16,354 - INFO - src.optimization_p 987 - Trial 13: Ganancia Media = 264,463,010, Ganancia Max = 268,564,000, Envios Max Gan = 10,667
2025-11-16 06:27:39,401 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1149185 (CMay : 1121247 / CMin: 27938)
2025-11-16 06:34:54,075 - INFO - src.optimization_p 134 - Iteraci√≥n 14 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 06:34:54,076 - INFO - src.optimization_p 135 - Ganancia: 258,414,179---Par√°metros: {params}
2025-11-16 06:34:54,077 - INFO - src.optimization_p 987 - Trial 14: Ganancia Media = 258,414,179, Ganancia Max = 263,732,000, Envios Max Gan = 11,012
2025-11-16 06:35:19,021 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1148763 (CMay : 1120825 / CMin: 27938)
2025-11-16 06:41:14,264 - INFO - src.optimization_p 134 - Iteraci√≥n 15 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 06:41:14,265 - INFO - src.optimization_p 135 - Ganancia: 262,140,484---Par√°metros: {params}
2025-11-16 06:41:14,265 - INFO - src.optimization_p 987 - Trial 15: Ganancia Media = 262,140,484, Ganancia Max = 265,828,000, Envios Max Gan = 9,996
2025-11-16 06:41:37,762 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1149306 (CMay : 1121368 / CMin: 27938)
2025-11-16 06:47:15,039 - INFO - src.optimization_p 134 - Iteraci√≥n 16 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 06:47:15,040 - INFO - src.optimization_p 135 - Ganancia: 239,646,801---Par√°metros: {params}
2025-11-16 06:47:15,041 - INFO - src.optimization_p 987 - Trial 16: Ganancia Media = 239,646,801, Ganancia Max = 244,608,000, Envios Max Gan = 10,569
2025-11-16 06:47:37,740 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1150564 (CMay : 1122626 / CMin: 27938)
2025-11-16 06:54:32,298 - INFO - src.optimization_p 134 - Iteraci√≥n 17 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 06:54:32,299 - INFO - src.optimization_p 135 - Ganancia: 267,897,061---Par√°metros: {params}
2025-11-16 06:54:32,300 - INFO - src.optimization_p 987 - Trial 17: Ganancia Media = 267,897,061, Ganancia Max = 274,020,000, Envios Max Gan = 10,042
2025-11-16 06:54:55,188 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1149033 (CMay : 1121095 / CMin: 27938)
2025-11-16 07:02:06,432 - INFO - src.optimization_p 134 - Iteraci√≥n 18 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 07:02:06,433 - INFO - src.optimization_p 135 - Ganancia: 269,473,325---Par√°metros: {params}
2025-11-16 07:02:06,433 - INFO - src.optimization_p 987 - Trial 18: Ganancia Media = 269,473,325, Ganancia Max = 274,044,000, Envios Max Gan = 9,969
2025-11-16 07:02:29,839 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3418526 (C May: 3390588 / C Min: 27938), registros finales=1148352 (CMay : 1120414 / CMin: 27938)
2025-11-16 07:10:00,611 - INFO - src.optimization_p 134 - Iteraci√≥n 19 guardada en resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 07:10:00,612 - INFO - src.optimization_p 135 - Ganancia: 267,755,298---Par√°metros: {params}
2025-11-16 07:10:00,612 - INFO - src.optimization_p 987 - Trial 19: Ganancia Media = 267,755,298, Ganancia Max = 272,272,000, Envios Max Gan = 10,681
2025-11-16 07:10:05,992 - INFO - src.optimization_p 1136 - üèÜ Mejor ganancia: 269,473,325
2025-11-16 07:10:06,966 - INFO - src.optimization_p 1137 - Mejores par√°metros: {'num_iterations': 440, 'num_leaves': 210, 'learning_rate': 0.08337811545338246, 'feature_fraction': 0.5891728605839905, 'bagging_fraction': 0.5704458758340938, 'min_child_samples': 14, 'max_depth': 17, 'reg_lambda': 4.755244468418879, 'reg_alpha': 2.1729332576981184, 'min_gain_to_split': 3.6851576986478536}
2025-11-16 07:10:06,967 - INFO - __main__ 110 - === AN√ÅLISIS DE RESULTADOS ===
2025-11-16 07:10:08,487 - INFO - __main__ 114 - Top 5 mejores trials:
2025-11-16 07:10:08,489 - INFO - __main__ 116 -   Trial 18: 269,473,325
2025-11-16 07:10:08,490 - INFO - __main__ 116 -   Trial 17: 267,897,061
2025-11-16 07:10:08,491 - INFO - __main__ 116 -   Trial 19: 267,755,298
2025-11-16 07:10:08,491 - INFO - __main__ 116 -   Trial 9: 265,997,615
2025-11-16 07:10:08,492 - INFO - __main__ 116 -   Trial 12: 265,438,917
2025-11-16 07:10:08,492 - INFO - __main__ 118 - === OPTIMIZACI√ìN COMPLETADA ===
2025-11-16 07:10:08,492 - INFO - __main__ 121 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-11-16 07:10:08,493 - INFO - src.best_params 49 - Mejores hiperpar√°metros cargados desde resultados/Compe_02_V4_2ob_ss03_iteraciones.json
2025-11-16 07:10:08,493 - INFO - src.best_params 50 - Mejor ganancia encontrada: 269,473,325
2025-11-16 07:10:08,494 - INFO - src.best_params 51 - Trial n√∫mero: 18
2025-11-16 07:10:08,494 - INFO - src.best_params 52 - Par√°metros: {'num_iterations': 440, 'num_leaves': 210, 'learning_rate': 0.08337811545338246, 'feature_fraction': 0.5891728605839905, 'bagging_fraction': 0.5704458758340938, 'min_child_samples': 14, 'max_depth': 17, 'reg_lambda': 4.755244468418879, 'reg_alpha': 2.1729332576981184, 'min_gain_to_split': 3.6851576986478536, 'bagging_freq': 1, 'objective': 'binary', 'metric': 'None', 'random_state': 839071}
2025-11-16 07:10:08,494 - INFO - src.optimization_p 453 - === EVALUACI√ìN EN CONJUNTO DE TEST (Promediando N Modelos) ===
2025-11-16 07:10:08,495 - INFO - src.optimization_p 466 - Per√≠odos de test a evaluar: ['202104', '202106']
2025-11-16 07:10:08,495 - INFO - src.optimization_p 467 - Semilla base: 839071, N Modelos: 20
2025-11-16 07:10:22,591 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=3580681 (C May: 3550880 / C Min: 29801), registros finales=1214185 (CMay : 1184384 / CMin: 29801)
2025-11-16 07:10:37,194 - INFO - src.optimization_p 482 - Dimensiones df_train_completo: (1214185, 1005)
2025-11-16 07:10:40,697 - INFO - src.optimization_p 490 - Tipo de dato de train_data: <class 'lightgbm.basic.Dataset'>, Dimensiones de train_data: (1214185, 1003)
2025-11-16 07:10:40,698 - INFO - src.optimization_p 495 - Iniciando entrenamiento de 20 modelos...
2025-11-16 07:10:40,699 - INFO - src.optimization_p 505 - Entrenando modelo 1/20 (Semilla: 3060817664)...
2025-11-16 07:15:48,926 - INFO - src.optimization_p 505 - Entrenando modelo 2/20 (Semilla: 992140286)...
2025-11-16 07:19:57,519 - INFO - src.optimization_p 505 - Entrenando modelo 3/20 (Semilla: 3237557171)...
2025-11-16 07:24:09,373 - INFO - src.optimization_p 505 - Entrenando modelo 4/20 (Semilla: 2314383897)...
2025-11-16 07:28:10,759 - INFO - src.optimization_p 505 - Entrenando modelo 5/20 (Semilla: 404200786)...
2025-11-16 07:32:19,685 - INFO - src.optimization_p 505 - Entrenando modelo 6/20 (Semilla: 3847701201)...
2025-11-16 07:36:19,912 - INFO - src.optimization_p 505 - Entrenando modelo 7/20 (Semilla: 2865421062)...
2025-11-16 07:40:21,662 - INFO - src.optimization_p 505 - Entrenando modelo 8/20 (Semilla: 3643192183)...
2025-11-16 07:44:34,382 - INFO - src.optimization_p 505 - Entrenando modelo 9/20 (Semilla: 1117668684)...
2025-11-16 07:48:32,184 - INFO - src.optimization_p 505 - Entrenando modelo 10/20 (Semilla: 3510756625)...
2025-11-16 07:52:44,303 - INFO - src.optimization_p 505 - Entrenando modelo 11/20 (Semilla: 2571145538)...
2025-11-16 07:56:38,190 - INFO - src.optimization_p 505 - Entrenando modelo 12/20 (Semilla: 2213045784)...
2025-11-16 08:00:34,696 - INFO - src.optimization_p 505 - Entrenando modelo 13/20 (Semilla: 2153453051)...
2025-11-16 08:04:48,950 - INFO - src.optimization_p 505 - Entrenando modelo 14/20 (Semilla: 3163014560)...
2025-11-16 08:08:41,972 - INFO - src.optimization_p 505 - Entrenando modelo 15/20 (Semilla: 3698929166)...
2025-11-16 08:12:56,914 - INFO - src.optimization_p 505 - Entrenando modelo 16/20 (Semilla: 766887731)...
2025-11-16 08:16:58,899 - INFO - src.optimization_p 505 - Entrenando modelo 17/20 (Semilla: 1371336364)...
2025-11-16 08:21:00,210 - INFO - src.optimization_p 505 - Entrenando modelo 18/20 (Semilla: 1730670187)...
2025-11-16 08:25:09,009 - INFO - src.optimization_p 505 - Entrenando modelo 19/20 (Semilla: 1386299423)...
2025-11-16 08:29:09,104 - INFO - src.optimization_p 505 - Entrenando modelo 20/20 (Semilla: 1650770698)...
2025-11-16 08:33:25,979 - INFO - src.optimization_p 525 - Entrenamiento de los N modelos completado.
2025-11-16 08:33:25,980 - INFO - src.optimization_p 532 - --- Evaluando en Per√≠odo de Test: 202104 ---
2025-11-16 08:33:36,179 - INFO - src.optimization_p 541 - Dimensiones df_test (202104): (163418, 1005)
2025-11-16 08:35:05,799 - INFO - src.optimization_p 571 - Predicciones completadas para el mes 202104. Promediando...
2025-11-16 08:35:05,886 - INFO - src.optimization_p 602 - Resultados Test Mes 202104 (N=20): Ganancia Suavizada = 378,961,189, Ganancia M√°xima = 383,740,000, Envios M√°x Gan = 13292
2025-11-16 08:35:05,886 - INFO - src.optimization_p 532 - --- Evaluando en Per√≠odo de Test: 202106 ---
2025-11-16 08:35:07,006 - INFO - src.optimization_p 541 - Dimensiones df_test (202106): (164313, 1005)
2025-11-16 08:36:34,518 - INFO - src.optimization_p 571 - Predicciones completadas para el mes 202106. Promediando...
2025-11-16 08:36:34,603 - INFO - src.optimization_p 602 - Resultados Test Mes 202106 (N=20): Ganancia Suavizada = 402,248,176, Ganancia M√°xima = 405,000,000, Envios M√°x Gan = 10989
2025-11-16 08:36:34,604 - INFO - src.optimization_p 609 - === EVALUACI√ìN EN CONJUNTO DE TEST COMPLETADA ===
2025-11-16 08:36:35,720 - INFO - src.optimization_p 323 - Mes 202104 -> Ganancia suavizada: 378,961,189---Ganancia m√°xima: 383,740,000
2025-11-16 08:36:35,721 - INFO - src.optimization_p 323 - Mes 202106 -> Ganancia suavizada: 402,248,176---Ganancia m√°xima: 405,000,000
2025-11-16 08:36:36,049 - INFO - src.optimization_p 337 - Resultados de 2 mes(es) guardados en /home/guijomter/buckets/b1/Compe_02/resultados/Compe_02_V4_2ob_ss03_resultado_test.json
2025-11-16 08:36:36,050 - INFO - __main__ 133 - === RESUMEN DE EVALUACI√ìN EN TEST ===
2025-11-16 08:36:36,050 - INFO - __main__ 140 - --- Mes: 202104 ---
2025-11-16 08:36:36,050 - INFO - __main__ 141 -   ‚úÖ Ganancia suavizada: 378,961,189
2025-11-16 08:36:36,051 - INFO - __main__ 142 -   ‚úÖ Ganancia m√°xima: 383,740,000
2025-11-16 08:36:36,051 - INFO - __main__ 143 -   üîç Env√≠os de m√°x. ganancia: 13,292
2025-11-16 08:36:36,051 - INFO - __main__ 140 - --- Mes: 202106 ---
2025-11-16 08:36:36,051 - INFO - __main__ 141 -   ‚úÖ Ganancia suavizada: 402,248,176
2025-11-16 08:36:36,052 - INFO - __main__ 142 -   ‚úÖ Ganancia m√°xima: 405,000,000
2025-11-16 08:36:36,052 - INFO - __main__ 143 -   üîç Env√≠os de m√°x. ganancia: 10,989
2025-11-16 08:36:36,052 - INFO - __main__ 146 - === ENTRENAMIENTO FINAL ===
2025-11-16 08:36:36,052 - INFO - __main__ 147 - Preparar datos para entrenamiento final
2025-11-16 08:36:36,053 - INFO - src.final_training_p 450 - Preparando datos para entrenamiento final
2025-11-16 08:36:36,053 - INFO - src.final_training_p 451 - Per√≠odos de entrenamiento: ['201901', '201902', '201903', '201904', '201905', '201906', '201907', '201908', '201909', '201910', '201911', '201912', '202001', '202002', '202003', '202004', '202005', '202007', '202008', '202009', '202010', '202011', '202012', '202101', '202102', '202103', '202104', '202105', '202106']
2025-11-16 08:36:36,053 - INFO - src.final_training_p 452 - Per√≠odo de predicci√≥n: 202108
2025-11-16 08:36:43,853 - INFO - src.final_training_p 464 - Registros de entrenamiento: 4,235,438
2025-11-16 08:36:43,854 - INFO - src.final_training_p 465 - Registros de predicci√≥n: 164,822
2025-11-16 08:37:07,105 - INFO - src.optimization_p 1414 - Undersampling aplicado: tasa=0.3, registros originales=4235438 (C May: 4197609 / C Min: 37829), registros finales=1476706 (CMay : 1438877 / CMin: 37829)
2025-11-16 08:37:31,341 - INFO - src.final_training_p 480 - Features utilizadas: 1,003
2025-11-16 08:37:31,346 - INFO - src.final_training_p 481 - Distribuci√≥n del target - 0: 1,438,877, 1: 37,829
2025-11-16 08:37:31,408 - INFO - __main__ 152 - Entrenar modelo final
2025-11-16 08:37:31,409 - INFO - src.final_training_p 250 - Iniciando entrenamiento de 20 modelos finales (base: 839071)
2025-11-16 08:37:31,411 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 3060817664...
2025-11-16 08:44:23,172 - INFO - src.final_training_p 296 - Modelo final (semilla 3060817664) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_3060817664_2025-11-16_08-44-22.txt
2025-11-16 08:44:23,370 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 992140286...
2025-11-16 08:49:28,996 - INFO - src.final_training_p 296 - Modelo final (semilla 992140286) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_992140286_2025-11-16_08-49-28.txt
2025-11-16 08:49:28,997 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 3237557171...
2025-11-16 08:54:47,291 - INFO - src.final_training_p 296 - Modelo final (semilla 3237557171) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_3237557171_2025-11-16_08-54-47.txt
2025-11-16 08:54:47,292 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 2314383897...
2025-11-16 08:59:48,421 - INFO - src.final_training_p 296 - Modelo final (semilla 2314383897) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_2314383897_2025-11-16_08-59-48.txt
2025-11-16 08:59:48,421 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 404200786...
2025-11-16 09:05:05,541 - INFO - src.final_training_p 296 - Modelo final (semilla 404200786) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_404200786_2025-11-16_09-05-05.txt
2025-11-16 09:05:05,543 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 3847701201...
2025-11-16 09:10:11,178 - INFO - src.final_training_p 296 - Modelo final (semilla 3847701201) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_3847701201_2025-11-16_09-10-11.txt
2025-11-16 09:10:11,179 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 2865421062...
2025-11-16 09:15:39,197 - INFO - src.final_training_p 296 - Modelo final (semilla 2865421062) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_2865421062_2025-11-16_09-15-39.txt
2025-11-16 09:15:39,198 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 3643192183...
2025-11-16 09:20:45,309 - INFO - src.final_training_p 296 - Modelo final (semilla 3643192183) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_3643192183_2025-11-16_09-20-45.txt
2025-11-16 09:20:45,310 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 1117668684...
2025-11-16 09:26:00,771 - INFO - src.final_training_p 296 - Modelo final (semilla 1117668684) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_1117668684_2025-11-16_09-26-00.txt
2025-11-16 09:26:00,772 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 3510756625...
2025-11-16 09:31:08,637 - INFO - src.final_training_p 296 - Modelo final (semilla 3510756625) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_3510756625_2025-11-16_09-31-08.txt
2025-11-16 09:31:08,638 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 2571145538...
2025-11-16 09:36:27,113 - INFO - src.final_training_p 296 - Modelo final (semilla 2571145538) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_2571145538_2025-11-16_09-36-27.txt
2025-11-16 09:36:27,196 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 2213045784...
2025-11-16 09:41:54,871 - INFO - src.final_training_p 296 - Modelo final (semilla 2213045784) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_2213045784_2025-11-16_09-41-54.txt
2025-11-16 09:41:54,872 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 2153453051...
2025-11-16 09:47:13,533 - INFO - src.final_training_p 296 - Modelo final (semilla 2153453051) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_2153453051_2025-11-16_09-47-13.txt
2025-11-16 09:47:13,534 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 3163014560...
2025-11-16 09:52:24,654 - INFO - src.final_training_p 296 - Modelo final (semilla 3163014560) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_3163014560_2025-11-16_09-52-24.txt
2025-11-16 09:52:24,655 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 3698929166...
2025-11-16 09:57:36,747 - INFO - src.final_training_p 296 - Modelo final (semilla 3698929166) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_3698929166_2025-11-16_09-57-36.txt
2025-11-16 09:57:36,748 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 766887731...
2025-11-16 10:03:03,610 - INFO - src.final_training_p 296 - Modelo final (semilla 766887731) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_766887731_2025-11-16_10-03-03.txt
2025-11-16 10:03:03,611 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 1371336364...
2025-11-16 10:08:12,797 - INFO - src.final_training_p 296 - Modelo final (semilla 1371336364) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_1371336364_2025-11-16_10-08-12.txt
2025-11-16 10:08:12,798 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 1730670187...
2025-11-16 10:13:52,207 - INFO - src.final_training_p 296 - Modelo final (semilla 1730670187) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_1730670187_2025-11-16_10-13-52.txt
2025-11-16 10:13:52,208 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 1386299423...
2025-11-16 10:19:21,165 - INFO - src.final_training_p 296 - Modelo final (semilla 1386299423) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_1386299423_2025-11-16_10-19-21.txt
2025-11-16 10:19:21,166 - INFO - src.final_training_p 280 - Entrenando modelo con semilla: 1650770698...
2025-11-16 10:24:43,903 - INFO - src.final_training_p 296 - Modelo final (semilla 1650770698) guardado en: resultados/Compe_02_V4_2ob_ss03/modelo_final_semilla_1650770698_2025-11-16_10-24-43.txt
2025-11-16 10:24:43,904 - INFO - src.final_training_p 301 - Entrenamiento de 20 modelos finales completado.
2025-11-16 10:24:44,575 - INFO - __main__ 164 - Usando porcentaje de env√≠os promedio (calculado de 2 meses de test): 0.0741
2025-11-16 10:24:44,577 - INFO - __main__ 167 - Generar predicciones finales
2025-11-16 10:24:44,614 - INFO - src.final_training_p 320 - Generando predicciones finales (promedio de seeds)
2025-11-16 10:26:20,998 - INFO - src.final_training_p 339 - Predicciones de probabilidad guardadas en: resultados/predicciones_probabilidad_Compe_02_V4_2ob_ss03_varias_seeds_2025-11-16_10-26-20.csv
2025-11-16 10:26:21,031 - INFO - src.final_training_p 361 - Predicciones generadas:
2025-11-16 10:26:21,032 - INFO - src.final_training_p 362 -   Total clientes: 164,822
2025-11-16 10:26:21,033 - INFO - src.final_training_p 363 -   Predicciones positivas: 12,215 (7.41%)
2025-11-16 10:26:21,033 - INFO - src.final_training_p 364 -   Predicciones negativas: 152,607
2025-11-16 10:26:21,033 - INFO - src.final_training_p 365 -   Porcentaje solicitado: 0.0741
2025-11-16 10:26:21,034 - INFO - __main__ 171 - Guardar predicciones
2025-11-16 10:26:21,375 - INFO - src.output_manager_p 51 - Predicciones guardadas en: predict/Compe_02_V4_2ob_ss03_20251116_102621.csv
2025-11-16 10:26:21,375 - INFO - src.output_manager_p 52 - Formato del archivo:
2025-11-16 10:26:21,377 - INFO - src.output_manager_p 53 -   Columnas: ['numero_de_cliente', 'predict']
2025-11-16 10:26:21,378 - INFO - src.output_manager_p 54 -   Registros: 164,822
2025-11-16 10:26:21,378 - INFO - src.output_manager_p 55 -   Primeras filas:
2025-11-16 10:26:21,418 - INFO - src.output_manager_p 57 - 
shape: (5, 2)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ numero_de_cliente ‚îÜ predict ‚îÇ
‚îÇ ---               ‚îÜ ---     ‚îÇ
‚îÇ i64               ‚îÜ i64     ‚îÇ
‚ïû‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï™‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï°
‚îÇ 349255018         ‚îÜ 0       ‚îÇ
‚îÇ 349338588         ‚îÜ 0       ‚îÇ
‚îÇ 349429818         ‚îÜ 0       ‚îÇ
‚îÇ 349612799         ‚îÜ 0       ‚îÇ
‚îÇ 349634524         ‚îÜ 0       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
2025-11-16 10:26:21,418 - INFO - __main__ 175 - === RESUMEN FINAL ===
2025-11-16 10:26:21,419 - INFO - __main__ 176 - ‚úÖ Entrenamiento final completado exitosamente
2025-11-16 10:26:21,420 - INFO - __main__ 177 - üìä Mejores hiperpar√°metros utilizados: {'num_iterations': 440, 'num_leaves': 210, 'learning_rate': 0.08337811545338246, 'feature_fraction': 0.5891728605839905, 'bagging_fraction': 0.5704458758340938, 'min_child_samples': 14, 'max_depth': 17, 'reg_lambda': 4.755244468418879, 'reg_alpha': 2.1729332576981184, 'min_gain_to_split': 3.6851576986478536, 'bagging_freq': 1, 'objective': 'binary', 'metric': 'None', 'random_state': 839071}
2025-11-16 10:26:21,422 - INFO - __main__ 178 - üéØ Per√≠odos de entrenamiento: ['201901', '201902', '201903', '201904', '201905', '201906', '201907', '201908', '201909', '201910', '201911', '201912', '202001', '202002', '202003', '202004', '202005', '202007', '202008', '202009', '202010', '202011', '202012', '202101', '202102', '202103', '202104', '202105', '202106']
2025-11-16 10:26:21,422 - INFO - __main__ 179 - üîÆ Per√≠odo de predicci√≥n: 202108
2025-11-16 10:26:21,423 - INFO - __main__ 182 - üìÅ Archivo de salida: predict/Compe_02_V4_2ob_ss03_20251116_102621.csv
2025-11-16 10:26:21,425 - INFO - __main__ 183 - üìù Log detallado: /home/guijomter/buckets/b1/Compe_02/logs/log_Compe_02_V4_2ob_ss03_2025-11-16_04-49-31.log
2025-11-16 10:26:21,426 - INFO - __main__ 186 - >>> Ejecuci√≥n finalizada. Revisar logs para mas detalles.
2025-11-16 10:26:26,948 - INFO - __main__ 195 - Ejecuci√≥n finalizada.
