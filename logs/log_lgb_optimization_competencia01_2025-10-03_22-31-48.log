2025-10-03 22:31:48,425 - INFO - __main__ 36 - Inicio de ejecucion.
2025-10-03 22:31:48,425 - INFO - __name__ 14 - Cargando dataset desde ./data/competencia_01.csv
2025-10-03 22:32:02,026 - INFO - __name__ 17 - Dataset cargado con 978439 filas y 155 columnas
2025-10-03 22:32:02,027 - INFO - __name__ 27 - Realizando feature engineering con 2 lags para 3 atributos
2025-10-03 22:32:10,128 - INFO - __name__ 57 - Feature engineering completado. DataFrame resultante con 161 columnas
2025-10-03 22:32:10,129 - INFO - __main__ 46 - Feature Engineering completado: (978439, 161)
2025-10-03 22:32:11,056 - INFO - __name__ 54 - Conversi√≥n completada:
2025-10-03 22:32:11,056 - INFO - __name__ 55 -   Original - CONTINUA: 642830, BAJA+1: 4575, BAJA+2: 3938
2025-10-03 22:32:11,057 - INFO - __name__ 56 -   Binario - 0: 642830, 1: 8513
2025-10-03 22:32:11,057 - INFO - __name__ 57 -   Distribuci√≥n: 1.31% casos positivos
2025-10-03 22:32:11,229 - INFO - src.optimization 190 - Iniciando optimizaci√≥n con 5 trials
2025-10-03 22:32:11,229 - INFO - src.optimization 191 - Configuraci√≥n: TRAIN=202102, VALID=202103, SEMILLA=[839071, 666557, 390653, 408341, 858577]
2025-10-03 22:32:17,905 - INFO - src.optimization 164 - Iteraci√≥n 0 guardada en resultados/lgb_optimization_competencia01_iteraciones.json
2025-10-03 22:32:17,905 - INFO - src.optimization 165 - Ganancia: 889,220,000---Par√°metros: {params}
2025-10-03 22:32:23,578 - INFO - src.optimization 164 - Iteraci√≥n 1 guardada en resultados/lgb_optimization_competencia01_iteraciones.json
2025-10-03 22:32:23,578 - INFO - src.optimization 165 - Ganancia: 889,660,000---Par√°metros: {params}
2025-10-03 22:32:28,950 - INFO - src.optimization 164 - Iteraci√≥n 2 guardada en resultados/lgb_optimization_competencia01_iteraciones.json
2025-10-03 22:32:28,951 - INFO - src.optimization 165 - Ganancia: 882,680,000---Par√°metros: {params}
2025-10-03 22:32:37,532 - INFO - src.optimization 164 - Iteraci√≥n 3 guardada en resultados/lgb_optimization_competencia01_iteraciones.json
2025-10-03 22:32:37,532 - INFO - src.optimization 165 - Ganancia: 917,060,000---Par√°metros: {params}
2025-10-03 22:32:42,247 - INFO - src.optimization 164 - Iteraci√≥n 4 guardada en resultados/lgb_optimization_competencia01_iteraciones.json
2025-10-03 22:32:42,248 - INFO - src.optimization 165 - Ganancia: 802,880,000---Par√°metros: {params}
2025-10-03 22:32:42,298 - INFO - src.optimization 206 - Mejor ganancia: 917,060,000
2025-10-03 22:32:42,298 - INFO - src.optimization 207 - Mejores par√°metros: {'num_leaves': 216, 'learn_rate': 0.17366294273363386, 'feature_fraction': 0.7121008793538173, 'bagging_fraction': 0.7776618112054995, 'min_child_samples': 30, 'max_depth': 12, 'reg_lambda': 9.031040823913969, 'reg_alpha': 4.707781892511267}
2025-10-03 22:32:42,298 - INFO - __main__ 55 - === AN√ÅLISIS DE RESULTADOS ===
2025-10-03 22:32:42,305 - INFO - __main__ 59 - Top 5 mejores trials:
2025-10-03 22:32:42,306 - INFO - __main__ 61 -   Trial 3: 917,060,000
2025-10-03 22:32:42,307 - INFO - __main__ 61 -   Trial 1: 889,660,000
2025-10-03 22:32:42,307 - INFO - __main__ 61 -   Trial 0: 889,220,000
2025-10-03 22:32:42,307 - INFO - __main__ 61 -   Trial 2: 882,680,000
2025-10-03 22:32:42,308 - INFO - __main__ 61 -   Trial 4: 802,880,000
2025-10-03 22:32:42,308 - INFO - __main__ 63 - === OPTIMIZACI√ìN COMPLETADA ===
2025-10-03 22:32:42,308 - INFO - __main__ 66 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-03 22:32:42,310 - INFO - src.best_params 34 - Mejores hiperpar√°metros cargados desde resultados/lgb_optimization_competencia01_iteraciones.json
2025-10-03 22:32:42,310 - INFO - src.best_params 35 - Mejor ganancia encontrada: 932,240,000
2025-10-03 22:32:42,311 - INFO - src.best_params 36 - Trial n√∫mero: 4
2025-10-03 22:32:42,311 - INFO - src.best_params 37 - Par√°metros: {'num_leaves': 262, 'learn_rate': 0.16696571034433907, 'feature_fraction': 0.7198509637373903, 'bagging_fraction': 0.4733795979028113, 'min_child_samples': 24, 'max_depth': 6, 'reg_lambda': 3.3607967363491964, 'reg_alpha': 5.533180037908927}
2025-10-03 22:32:42,311 - INFO - src.optimization 226 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-03 22:32:42,312 - INFO - src.optimization 227 - Per√≠odo de test: 202104
2025-10-03 22:32:43,151 - INFO - src.optimization 244 - Entrenando modelo con mejores hiperpar√°metros...
2025-10-03 22:32:43,152 - INFO - src.optimization 245 - Dimensiones df_train_completo: (325264, 161), Dimensiones df_test: (163418, 161)
2025-10-03 22:32:43,335 - INFO - src.optimization 252 - Tipo de dato de train_data: <class 'lightgbm.basic.Dataset'>, Tipo de dato de test_data: <class 'lightgbm.basic.Dataset'>
2025-10-03 22:32:43,336 - INFO - src.optimization 253 - Dimensiones de train_data: (325264, 160), Dimensiones de test_data: (163418, 160)
2025-10-03 22:32:49,024 - INFO - src.optimization 325 - Ganancia: 953,500,000---Total Predicciones positivas: 17,765
2025-10-03 22:32:49,024 - INFO - __main__ 77 - === RESUMEN DE EVALUACI√ìN EN TEST ===
2025-10-03 22:32:49,025 - INFO - __main__ 78 - ‚úÖ Ganancia en test: 953,500,000
2025-10-03 22:32:49,025 - INFO - __main__ 79 - üéØ Predicciones positivas: 17,765 (10.87%)
2025-10-03 22:32:49,025 - INFO - __main__ 83 - === ENTRENAMIENTO FINAL ===
2025-10-03 22:32:49,025 - INFO - __main__ 84 - Preparar datos para entrenamiento final
2025-10-03 22:32:49,026 - INFO - src.final_training 25 - Preparando datos para entrenamiento final
2025-10-03 22:32:49,026 - INFO - src.final_training 26 - Per√≠odos de entrenamiento: ['202101', '202102', '202103', '202104']
2025-10-03 22:32:49,026 - INFO - src.final_training 27 - Per√≠odo de predicci√≥n: 202106
2025-10-03 22:32:49,984 - INFO - src.final_training 38 - Registros de entrenamiento: 650,209
2025-10-03 22:32:49,985 - INFO - src.final_training 39 - Registros de predicci√≥n: 164,313
2025-10-03 22:32:49,985 - INFO - __name__ 27 - Realizando feature engineering con 2 lags para 3 atributos
2025-10-03 22:32:51,551 - INFO - __name__ 57 - Feature engineering completado. DataFrame resultante con 167 columnas
2025-10-03 22:32:51,561 - INFO - src.final_training 50 - Feature Engineering completado sobre DF_predict: (164313, 167)
2025-10-03 22:32:51,561 - INFO - __name__ 27 - Realizando feature engineering con 2 lags para 3 atributos
2025-10-03 22:32:57,212 - INFO - __name__ 57 - Feature engineering completado. DataFrame resultante con 167 columnas
2025-10-03 22:32:57,260 - INFO - src.final_training 53 - Feature Engineering completado sobre DF_train: (650209, 167)
2025-10-03 22:32:57,728 - INFO - src.final_training 62 - Features utilizadas: 166
2025-10-03 22:32:57,732 - INFO - src.final_training 63 - Distribuci√≥n del target - 0: 642,830, 1: 7,379
2025-10-03 22:32:57,786 - INFO - __main__ 88 - Entrenar modelo final
2025-10-03 22:32:57,786 - INFO - src.final_training 79 - Iniciando entrenamiento del modelo final
2025-10-03 22:32:57,787 - INFO - src.final_training 90 - Par√°metros del modelo: {'objective': 'binary', 'metric': 'None', 'random_state': 839071, 'verbose': -1, 'num_leaves': 262, 'learn_rate': 0.16696571034433907, 'feature_fraction': 0.7198509637373903, 'bagging_fraction': 0.4733795979028113, 'min_child_samples': 24, 'max_depth': 6, 'reg_lambda': 3.3607967363491964, 'reg_alpha': 5.533180037908927}
2025-10-03 22:33:06,782 - INFO - src.final_training 107 - Entrenamiento del modelo final completado
2025-10-03 22:33:06,791 - INFO - __main__ 92 - Generar predicciones finales
2025-10-03 22:33:06,792 - INFO - src.final_training 123 - Generando predicciones finales
2025-10-03 22:33:07,156 - INFO - src.final_training 142 - Predicciones generadas:
2025-10-03 22:33:07,157 - INFO - src.final_training 143 -   Total clientes: 164,313
2025-10-03 22:33:07,157 - INFO - src.final_training 144 -   Predicciones positivas: 13,796 (8.40%)
2025-10-03 22:33:07,157 - INFO - src.final_training 145 -   Predicciones negativas: 150,517
2025-10-03 22:33:07,157 - INFO - src.final_training 146 -   Umbral utilizado: 0.025
2025-10-03 22:33:07,158 - INFO - __main__ 96 - Guardar predicciones
2025-10-03 22:33:07,303 - INFO - src.output_manager 42 - Predicciones guardadas en: predict/lgb_optimization_competencia01_20251003_223307.csv
2025-10-03 22:33:07,304 - INFO - src.output_manager 43 - Formato del archivo:
2025-10-03 22:33:07,304 - INFO - src.output_manager 44 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-03 22:33:07,304 - INFO - src.output_manager 45 -   Registros: 164,313
2025-10-03 22:33:07,305 - INFO - src.output_manager 46 -   Primeras filas:
2025-10-03 22:33:07,310 - INFO - src.output_manager 47 -    numero_de_cliente  predict
0          484472145        0
1          484472948        0
2          484480386        1
3          484480463        0
4          484584238        0
2025-10-03 22:33:07,311 - INFO - __main__ 100 - === RESUMEN FINAL ===
2025-10-03 22:33:07,311 - INFO - __main__ 101 - ‚úÖ Entrenamiento final completado exitosamente
2025-10-03 22:33:07,311 - INFO - __main__ 102 - üìä Mejores hiperpar√°metros utilizados: {'num_leaves': 262, 'learn_rate': 0.16696571034433907, 'feature_fraction': 0.7198509637373903, 'bagging_fraction': 0.4733795979028113, 'min_child_samples': 24, 'max_depth': 6, 'reg_lambda': 3.3607967363491964, 'reg_alpha': 5.533180037908927}
2025-10-03 22:33:07,312 - INFO - __main__ 103 - üéØ Per√≠odos de entrenamiento: ['202101', '202102', '202103', '202104']
2025-10-03 22:33:07,312 - INFO - __main__ 104 - üîÆ Per√≠odo de predicci√≥n: 202106
2025-10-03 22:33:07,313 - INFO - __main__ 105 - üìÅ Archivo de salida: predict/lgb_optimization_competencia01_20251003_223307.csv
2025-10-03 22:33:07,313 - INFO - __main__ 106 - üìù Log detallado: logs/log_lgb_optimization_competencia01_2025-10-03_22-31-48.log
2025-10-03 22:33:07,313 - INFO - __main__ 109 - >>> Ejecuci√≥n finalizada. Revisar logs para mas detalles.
