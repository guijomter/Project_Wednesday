2025-10-09 18:53:50,001 - INFO - __main__ 37 - Inicio de ejecucion.
2025-10-09 18:53:50,001 - INFO - __main__ 39 - N√∫mero de trials por estudio: 5
2025-10-09 18:53:50,002 - INFO - __name__ 14 - Cargando dataset desde ./data/competencia_01.csv
2025-10-09 18:54:01,500 - INFO - __name__ 17 - Dataset cargado con 978439 filas y 155 columnas
2025-10-09 18:54:01,500 - INFO - __main__ 49 - Archivo de features encontrado: data/df_fe_lgb_optimization_cv_competencia01.csv. Cargando desde disco.
2025-10-09 18:55:41,618 - INFO - __main__ 56 - Feature Engineering completado: (978439, 725)
2025-10-09 18:55:47,072 - INFO - __name__ 54 - Conversi√≥n completada:
2025-10-09 18:55:47,083 - INFO - __name__ 55 -   Original - CONTINUA: 642830, BAJA+1: 4575, BAJA+2: 3938
2025-10-09 18:55:47,083 - INFO - __name__ 56 -   Binario - 0: 642830, 1: 8513
2025-10-09 18:55:47,087 - INFO - __name__ 57 -   Distribuci√≥n: 1.31% casos positivos
2025-10-09 18:55:48,280 - INFO - src.optimization_cv 161 - Iniciando optimizaci√≥n con CV - 5 trials
2025-10-09 18:55:48,281 - INFO - src.optimization_cv 162 - Configuraci√≥n CV: per√≠odos=['202102', '202103']
2025-10-09 19:00:06,940 - INFO - src.optimization_cv 90 - Trial 0: Ganancia CV = 356,417,351 ¬± 9,088,863 
2025-10-09 19:00:06,942 - INFO - src.optimization_cv 91 - Trial 0: Mejor iteraci√≥n en CV: 307 
2025-10-09 19:00:06,955 - INFO - src.optimization_cv 146 - Iteraci√≥n 0 guardada. Ganancia promedio CV: 356,417,351 
2025-10-09 19:03:22,052 - INFO - src.optimization_cv 90 - Trial 1: Ganancia CV = 352,005,494 ¬± 10,492,239 
2025-10-09 19:03:22,054 - INFO - src.optimization_cv 91 - Trial 1: Mejor iteraci√≥n en CV: 165 
2025-10-09 19:03:22,064 - INFO - src.optimization_cv 146 - Iteraci√≥n 1 guardada. Ganancia promedio CV: 352,005,494 
2025-10-09 19:06:16,664 - INFO - src.optimization_cv 90 - Trial 2: Ganancia CV = 356,306,201 ¬± 11,561,315 
2025-10-09 19:06:16,667 - INFO - src.optimization_cv 91 - Trial 2: Mejor iteraci√≥n en CV: 228 
2025-10-09 19:06:16,682 - INFO - src.optimization_cv 146 - Iteraci√≥n 2 guardada. Ganancia promedio CV: 356,306,201 
2025-10-09 19:10:01,610 - INFO - src.optimization_cv 90 - Trial 3: Ganancia CV = 355,547,874 ¬± 10,840,766 
2025-10-09 19:10:01,613 - INFO - src.optimization_cv 91 - Trial 3: Mejor iteraci√≥n en CV: 222 
2025-10-09 19:10:01,626 - INFO - src.optimization_cv 146 - Iteraci√≥n 3 guardada. Ganancia promedio CV: 355,547,874 
2025-10-09 19:13:44,674 - INFO - src.optimization_cv 90 - Trial 4: Ganancia CV = 356,688,536 ¬± 10,066,766 
2025-10-09 19:13:44,677 - INFO - src.optimization_cv 91 - Trial 4: Mejor iteraci√≥n en CV: 365 
2025-10-09 19:13:44,693 - INFO - src.optimization_cv 146 - Iteraci√≥n 4 guardada. Ganancia promedio CV: 356,688,536 
2025-10-09 19:13:45,554 - INFO - src.optimization_cv 175 - === OPTIMIZACI√ìN CON CV COMPLETADA ===
2025-10-09 19:13:45,558 - INFO - src.optimization_cv 176 - N√∫mero de trials completados: 5
2025-10-09 19:13:45,559 - INFO - src.optimization_cv 177 - Mejor ganancia promedio = 356,688,536
2025-10-09 19:13:45,559 - INFO - src.optimization_cv 178 - Mejores par√°metros: {'num_iterations': 485, 'num_leaves': 124, 'learn_rate': 0.05664265749987125, 'feature_fraction': 0.5139478946749888, 'bagging_fraction': 0.5122069039555027, 'min_child_samples': 10, 'max_depth': 6, 'reg_lambda': 5.528854575339208, 'reg_alpha': 4.82483908812893, 'min_gain_to_split': 0.09090096235780787}
2025-10-09 19:13:45,560 - INFO - __main__ 67 - === AN√ÅLISIS DE RESULTADOS ===
2025-10-09 19:13:45,711 - INFO - __main__ 71 - Top 5 mejores trials:
2025-10-09 19:13:45,720 - INFO - __main__ 73 -   Trial 4: 356,688,536
2025-10-09 19:13:45,721 - INFO - __main__ 73 -   Trial 0: 356,417,351
2025-10-09 19:13:45,722 - INFO - __main__ 73 -   Trial 2: 356,306,201
2025-10-09 19:13:45,723 - INFO - __main__ 73 -   Trial 3: 355,547,874
2025-10-09 19:13:45,724 - INFO - __main__ 73 -   Trial 1: 352,005,494
2025-10-09 19:13:45,724 - INFO - __main__ 75 - === OPTIMIZACI√ìN COMPLETADA ===
2025-10-09 19:13:45,725 - INFO - __main__ 78 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-09 19:13:45,728 - INFO - src.best_params 34 - Mejores hiperpar√°metros cargados desde resultados/lgb_optimization_cv_competencia01_iteraciones.json
2025-10-09 19:13:45,729 - INFO - src.best_params 35 - Mejor ganancia encontrada: 357,966,283
2025-10-09 19:13:45,729 - INFO - src.best_params 36 - Trial n√∫mero: 4
2025-10-09 19:13:45,729 - INFO - src.best_params 37 - Par√°metros: {'num_iterations': 485, 'num_leaves': 124, 'learn_rate': 0.05664265749987125, 'feature_fraction': 0.5139478946749888, 'bagging_fraction': 0.5122069039555027, 'min_child_samples': 10, 'max_depth': 6, 'reg_lambda': 5.528854575339208, 'reg_alpha': 4.82483908812893, 'min_gain_to_split': 0.09090096235780787}
2025-10-09 19:13:45,730 - INFO - src.optimization 301 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-09 19:13:45,730 - INFO - src.optimization 302 - Per√≠odo de test: 202104
2025-10-09 19:13:56,926 - INFO - src.optimization 319 - Entrenando modelo con mejores hiperpar√°metros...
2025-10-09 19:13:56,927 - INFO - src.optimization 320 - Dimensiones df_train_completo: (325264, 725), Dimensiones df_test: (163418, 725)
2025-10-09 19:14:00,809 - INFO - src.optimization 327 - Tipo de dato de train_data: <class 'lightgbm.basic.Dataset'>, Dimensiones de train_data: (325264, 724)
2025-10-09 19:14:47,558 - INFO - src.optimization 414 - Ganancia: 931,920,000---Total Predicciones positivas: 12,764
2025-10-09 19:14:47,560 - INFO - __main__ 89 - === RESUMEN DE EVALUACI√ìN EN TEST ===
2025-10-09 19:14:47,561 - INFO - __main__ 90 - ‚úÖ Ganancia en test: 931,920,000
2025-10-09 19:14:47,561 - INFO - __main__ 91 - üîç Umbral √≥ptimo encontrado: 0.0350
2025-10-09 19:14:47,562 - INFO - __main__ 92 - üéØ Predicciones positivas: 12,764 (7.81%)
2025-10-09 19:14:47,562 - INFO - __main__ 96 - === ENTRENAMIENTO FINAL ===
2025-10-09 19:14:47,562 - INFO - __main__ 97 - Preparar datos para entrenamiento final
2025-10-09 19:14:47,563 - INFO - src.final_training 25 - Preparando datos para entrenamiento final
2025-10-09 19:14:47,564 - INFO - src.final_training 26 - Per√≠odos de entrenamiento: ['202101', '202102', '202103', '202104']
2025-10-09 19:14:47,564 - INFO - src.final_training 27 - Per√≠odo de predicci√≥n: 202106
2025-10-09 19:15:04,197 - INFO - src.final_training 37 - Registros de entrenamiento: 650,209
2025-10-09 19:15:04,204 - INFO - src.final_training 38 - Registros de predicci√≥n: 164,313
2025-10-09 19:15:22,831 - INFO - src.final_training 55 - Features utilizadas: 724
2025-10-09 19:15:22,850 - INFO - src.final_training 56 - Distribuci√≥n del target - 0: 642,830, 1: 7,379
2025-10-09 19:15:23,265 - INFO - __main__ 101 - Entrenar modelo final
2025-10-09 19:15:23,266 - INFO - src.final_training 76 - Iniciando entrenamiento del modelo final
2025-10-09 19:15:23,270 - INFO - src.final_training 87 - Par√°metros del modelo: {'objective': 'binary', 'metric': 'None', 'random_state': 839071, 'verbose': -1, 'num_iterations': 485, 'num_leaves': 124, 'learn_rate': 0.05664265749987125, 'feature_fraction': 0.5139478946749888, 'bagging_fraction': 0.5122069039555027, 'min_child_samples': 10, 'max_depth': 6, 'reg_lambda': 5.528854575339208, 'reg_alpha': 4.82483908812893, 'min_gain_to_split': 0.09090096235780787}
2025-10-09 19:17:06,132 - INFO - src.final_training 112 - Modelo final guardado en: resultados/modelo_final_lgb_optimization_cv_competencia01_2025-10-09_19-17-06.txt
2025-10-09 19:17:06,133 - INFO - src.final_training 114 - Entrenamiento del modelo final completado
2025-10-09 19:17:06,265 - INFO - __main__ 105 - Generar predicciones finales
2025-10-09 19:17:06,265 - INFO - src.final_training 130 - Generando predicciones finales
2025-10-09 19:17:09,157 - INFO - src.final_training 143 - Predicciones de probabilidad guardadas en: resultados/predicciones_probabilidad_lgb_optimization_cv_competencia01_2025-10-09_19-17-08.csv
2025-10-09 19:17:09,175 - INFO - src.final_training 165 - Predicciones generadas:
2025-10-09 19:17:09,175 - INFO - src.final_training 166 -   Total clientes: 164,313
2025-10-09 19:17:09,176 - INFO - src.final_training 167 -   Predicciones positivas: 12,834 (7.81%)
2025-10-09 19:17:09,177 - INFO - src.final_training 168 -   Predicciones negativas: 151,479
2025-10-09 19:17:09,177 - INFO - src.final_training 169 -   Porcentaje solicitado: 0.0781
2025-10-09 19:17:09,178 - INFO - __main__ 110 - Guardar predicciones
2025-10-09 19:17:09,331 - INFO - src.output_manager 42 - Predicciones guardadas en: predict/lgb_optimization_cv_competencia01_20251009_191709.csv
2025-10-09 19:17:09,332 - INFO - src.output_manager 43 - Formato del archivo:
2025-10-09 19:17:09,333 - INFO - src.output_manager 44 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-09 19:17:09,333 - INFO - src.output_manager 45 -   Registros: 164,313
2025-10-09 19:17:09,333 - INFO - src.output_manager 46 -   Primeras filas:
2025-10-09 19:17:09,387 - INFO - src.output_manager 47 -    numero_de_cliente  predict
0          326142825        0
1          326216626        0
2          326248931        0
3          326382023        0
4          326397557        0
2025-10-09 19:17:09,388 - INFO - __main__ 114 - === RESUMEN FINAL ===
2025-10-09 19:17:09,388 - INFO - __main__ 115 - ‚úÖ Entrenamiento final completado exitosamente
2025-10-09 19:17:09,388 - INFO - __main__ 116 - üìä Mejores hiperpar√°metros utilizados: {'num_iterations': 485, 'num_leaves': 124, 'learn_rate': 0.05664265749987125, 'feature_fraction': 0.5139478946749888, 'bagging_fraction': 0.5122069039555027, 'min_child_samples': 10, 'max_depth': 6, 'reg_lambda': 5.528854575339208, 'reg_alpha': 4.82483908812893, 'min_gain_to_split': 0.09090096235780787}
2025-10-09 19:17:09,389 - INFO - __main__ 117 - üéØ Per√≠odos de entrenamiento: ['202101', '202102', '202103', '202104']
2025-10-09 19:17:09,389 - INFO - __main__ 118 - üîÆ Per√≠odo de predicci√≥n: 202106
2025-10-09 19:17:09,389 - INFO - __main__ 121 - üìÅ Archivo de salida: predict/lgb_optimization_cv_competencia01_20251009_191709.csv
2025-10-09 19:17:09,390 - INFO - __main__ 122 - üìù Log detallado: logs/log_lgb_optimization_cv_competencia01_2025-10-09_18-53-50.log
2025-10-09 19:17:09,390 - INFO - __main__ 125 - >>> Ejecuci√≥n finalizada. Revisar logs para mas detalles.
