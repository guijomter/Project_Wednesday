2025-10-10 18:15:21,060 - INFO - __main__ 37 - Inicio de ejecucion.
2025-10-10 18:15:21,061 - INFO - __main__ 39 - N√∫mero de trials por estudio: 10
2025-10-10 18:15:21,062 - INFO - __name__ 14 - Cargando dataset desde ./data/competencia_01.csv
2025-10-10 18:15:31,058 - INFO - __name__ 17 - Dataset cargado con 978439 filas y 155 columnas
2025-10-10 18:15:31,060 - INFO - __main__ 49 - Archivo de features encontrado: data/df_fe_lgb_optimization_cv_competencia01_f.csv. Cargando desde disco.
2025-10-10 18:16:58,513 - INFO - __main__ 56 - Feature Engineering completado: (978439, 721)
2025-10-10 18:17:02,368 - INFO - __name__ 54 - Conversi√≥n completada:
2025-10-10 18:17:02,371 - INFO - __name__ 55 -   Original - CONTINUA: 642830, BAJA+1: 4575, BAJA+2: 3938
2025-10-10 18:17:02,371 - INFO - __name__ 56 -   Binario - 0: 642830, 1: 8513
2025-10-10 18:17:02,373 - INFO - __name__ 57 -   Distribuci√≥n: 1.31% casos positivos
2025-10-10 18:17:02,973 - INFO - src.optimization_cv 161 - Iniciando optimizaci√≥n con CV - 10 trials
2025-10-10 18:17:02,974 - INFO - src.optimization_cv 162 - Configuraci√≥n CV: per√≠odos=['202102', '202103']
2025-10-10 18:20:53,761 - INFO - src.optimization_cv 90 - Trial 0: Ganancia CV = 335,664,444 ¬± 17,836,448 
2025-10-10 18:20:53,764 - INFO - src.optimization_cv 91 - Trial 0: Mejor iteraci√≥n en CV: 386 
2025-10-10 18:20:53,775 - INFO - src.optimization_cv 146 - Iteraci√≥n 0 guardada. Ganancia promedio CV: 335,664,444 
2025-10-10 18:22:26,877 - INFO - src.optimization_cv 90 - Trial 1: Ganancia CV = 344,592,400 ¬± 12,969,200 
2025-10-10 18:22:26,879 - INFO - src.optimization_cv 91 - Trial 1: Mejor iteraci√≥n en CV: 49 
2025-10-10 18:22:26,886 - INFO - src.optimization_cv 146 - Iteraci√≥n 1 guardada. Ganancia promedio CV: 344,592,400 
2025-10-10 18:24:52,162 - INFO - src.optimization_cv 90 - Trial 2: Ganancia CV = 342,829,989 ¬± 18,095,392 
2025-10-10 18:24:52,167 - INFO - src.optimization_cv 91 - Trial 2: Mejor iteraci√≥n en CV: 188 
2025-10-10 18:24:52,180 - INFO - src.optimization_cv 146 - Iteraci√≥n 2 guardada. Ganancia promedio CV: 342,829,989 
2025-10-10 18:28:06,728 - INFO - src.optimization_cv 90 - Trial 3: Ganancia CV = 332,726,852 ¬± 17,370,608 
2025-10-10 18:28:06,732 - INFO - src.optimization_cv 91 - Trial 3: Mejor iteraci√≥n en CV: 431 
2025-10-10 18:28:06,754 - INFO - src.optimization_cv 146 - Iteraci√≥n 3 guardada. Ganancia promedio CV: 332,726,852 
2025-10-10 18:29:37,864 - INFO - src.optimization_cv 90 - Trial 4: Ganancia CV = 331,487,714 ¬± 18,030,754 
2025-10-10 18:29:37,868 - INFO - src.optimization_cv 91 - Trial 4: Mejor iteraci√≥n en CV: 83 
2025-10-10 18:29:37,879 - INFO - src.optimization_cv 146 - Iteraci√≥n 4 guardada. Ganancia promedio CV: 331,487,714 
2025-10-10 18:31:13,028 - INFO - src.optimization_cv 90 - Trial 5: Ganancia CV = 342,031,831 ¬± 18,670,457 
2025-10-10 18:31:13,030 - INFO - src.optimization_cv 91 - Trial 5: Mejor iteraci√≥n en CV: 70 
2025-10-10 18:31:13,039 - INFO - src.optimization_cv 146 - Iteraci√≥n 5 guardada. Ganancia promedio CV: 342,031,831 
2025-10-10 18:32:27,584 - INFO - src.optimization_cv 90 - Trial 6: Ganancia CV = 339,583,474 ¬± 15,925,611 
2025-10-10 18:32:27,587 - INFO - src.optimization_cv 91 - Trial 6: Mejor iteraci√≥n en CV: 75 
2025-10-10 18:32:27,597 - INFO - src.optimization_cv 146 - Iteraci√≥n 6 guardada. Ganancia promedio CV: 339,583,474 
2025-10-10 18:34:15,525 - INFO - src.optimization_cv 90 - Trial 7: Ganancia CV = 328,432,316 ¬± 12,885,844 
2025-10-10 18:34:15,527 - INFO - src.optimization_cv 91 - Trial 7: Mejor iteraci√≥n en CV: 189 
2025-10-10 18:34:15,536 - INFO - src.optimization_cv 146 - Iteraci√≥n 7 guardada. Ganancia promedio CV: 328,432,316 
2025-10-10 18:37:18,132 - INFO - src.optimization_cv 90 - Trial 8: Ganancia CV = 350,065,310 ¬± 11,192,866 
2025-10-10 18:37:18,137 - INFO - src.optimization_cv 91 - Trial 8: Mejor iteraci√≥n en CV: 170 
2025-10-10 18:37:18,145 - INFO - src.optimization_cv 146 - Iteraci√≥n 8 guardada. Ganancia promedio CV: 350,065,310 
2025-10-10 18:39:08,876 - INFO - src.optimization_cv 90 - Trial 9: Ganancia CV = 330,327,081 ¬± 16,900,477 
2025-10-10 18:39:08,878 - INFO - src.optimization_cv 91 - Trial 9: Mejor iteraci√≥n en CV: 221 
2025-10-10 18:39:08,890 - INFO - src.optimization_cv 146 - Iteraci√≥n 9 guardada. Ganancia promedio CV: 330,327,081 
2025-10-10 18:39:09,328 - INFO - src.optimization_cv 175 - === OPTIMIZACI√ìN CON CV COMPLETADA ===
2025-10-10 18:39:09,334 - INFO - src.optimization_cv 176 - N√∫mero de trials completados: 10
2025-10-10 18:39:09,334 - INFO - src.optimization_cv 177 - Mejor ganancia promedio = 350,065,310
2025-10-10 18:39:09,335 - INFO - src.optimization_cv 178 - Mejores par√°metros: {'num_iterations': 686, 'num_leaves': 147, 'learn_rate': 0.040186646399242805, 'feature_fraction': 0.9214278048493593, 'bagging_fraction': 0.5651151375185944, 'min_child_samples': 860, 'max_depth': 14, 'reg_lambda': 5.207999985706721, 'reg_alpha': 4.973695743989507, 'min_gain_to_split': 0.18861180071026387}
2025-10-10 18:39:09,336 - INFO - __main__ 67 - === AN√ÅLISIS DE RESULTADOS ===
2025-10-10 18:39:09,446 - INFO - __main__ 71 - Top 5 mejores trials:
2025-10-10 18:39:09,453 - INFO - __main__ 73 -   Trial 8: 350,065,310
2025-10-10 18:39:09,454 - INFO - __main__ 73 -   Trial 1: 344,592,400
2025-10-10 18:39:09,454 - INFO - __main__ 73 -   Trial 2: 342,829,989
2025-10-10 18:39:09,455 - INFO - __main__ 73 -   Trial 5: 342,031,831
2025-10-10 18:39:09,455 - INFO - __main__ 73 -   Trial 6: 339,583,474
2025-10-10 18:39:09,455 - INFO - __main__ 75 - === OPTIMIZACI√ìN COMPLETADA ===
2025-10-10 18:39:09,455 - INFO - __main__ 78 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-10 18:39:09,457 - INFO - src.best_params 34 - Mejores hiperpar√°metros cargados desde resultados/lgb_optimization_cv_competencia01_f_iteraciones.json
2025-10-10 18:39:09,457 - INFO - src.best_params 35 - Mejor ganancia encontrada: 350,065,310
2025-10-10 18:39:09,458 - INFO - src.best_params 36 - Trial n√∫mero: 8
2025-10-10 18:39:09,458 - INFO - src.best_params 37 - Par√°metros: {'num_iterations': 686, 'num_leaves': 147, 'learn_rate': 0.040186646399242805, 'feature_fraction': 0.9214278048493593, 'bagging_fraction': 0.5651151375185944, 'min_child_samples': 860, 'max_depth': 14, 'reg_lambda': 5.207999985706721, 'reg_alpha': 4.973695743989507, 'min_gain_to_split': 0.18861180071026387}
2025-10-10 18:39:09,458 - INFO - src.optimization 301 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-10 18:39:09,458 - INFO - src.optimization 302 - Per√≠odo de test: 202104
2025-10-10 18:39:18,196 - INFO - src.optimization 319 - Entrenando modelo con mejores hiperpar√°metros...
2025-10-10 18:39:18,196 - INFO - src.optimization 320 - Dimensiones df_train_completo: (325264, 721), Dimensiones df_test: (163418, 721)
2025-10-10 18:39:19,556 - INFO - src.optimization 327 - Tipo de dato de train_data: <class 'lightgbm.basic.Dataset'>, Dimensiones de train_data: (325264, 720)
2025-10-10 18:40:11,288 - INFO - src.optimization 430 - Ganancia: 915,200,000---Total Predicciones positivas: 13,920
2025-10-10 18:40:11,292 - INFO - __main__ 89 - === RESUMEN DE EVALUACI√ìN EN TEST ===
2025-10-10 18:40:11,292 - INFO - __main__ 90 - ‚úÖ Ganancia en test: 915,200,000
2025-10-10 18:40:11,293 - INFO - __main__ 91 - üîç Umbral √≥ptimo encontrado: 0.0350
2025-10-10 18:40:11,293 - INFO - __main__ 92 - üéØ Predicciones positivas: 13,920 (8.52%)
2025-10-10 18:40:11,293 - INFO - __main__ 96 - === ENTRENAMIENTO FINAL ===
2025-10-10 18:40:11,293 - INFO - __main__ 97 - Preparar datos para entrenamiento final
2025-10-10 18:40:11,293 - INFO - src.final_training 25 - Preparando datos para entrenamiento final
2025-10-10 18:40:11,294 - INFO - src.final_training 26 - Per√≠odos de entrenamiento: ['202101', '202102', '202103', '202104']
2025-10-10 18:40:11,294 - INFO - src.final_training 27 - Per√≠odo de predicci√≥n: 202106
2025-10-10 18:40:20,909 - INFO - src.final_training 37 - Registros de entrenamiento: 650,209
2025-10-10 18:40:20,910 - INFO - src.final_training 38 - Registros de predicci√≥n: 164,313
2025-10-10 18:40:39,321 - INFO - src.final_training 55 - Features utilizadas: 720
2025-10-10 18:40:39,356 - INFO - src.final_training 56 - Distribuci√≥n del target - 0: 642,830, 1: 7,379
2025-10-10 18:40:39,809 - INFO - __main__ 107 - Entrenar modelo final
2025-10-10 18:40:39,810 - INFO - src.final_training 76 - Iniciando entrenamiento del modelo final
2025-10-10 18:40:39,816 - INFO - src.final_training 87 - Par√°metros del modelo: {'objective': 'binary', 'metric': 'None', 'random_state': 839071, 'verbose': -1, 'num_iterations': 686, 'num_leaves': 147, 'learn_rate': 0.040186646399242805, 'feature_fraction': 0.9214278048493593, 'bagging_fraction': 0.5651151375185944, 'min_child_samples': 860, 'max_depth': 14, 'reg_lambda': 5.207999985706721, 'reg_alpha': 4.973695743989507, 'min_gain_to_split': 0.18861180071026387}
2025-10-10 18:42:58,024 - INFO - src.final_training 112 - Modelo final guardado en: resultados/modelo_final_lgb_optimization_cv_competencia01_f_2025-10-10_18-42-57.txt
2025-10-10 18:42:58,024 - INFO - src.final_training 114 - Entrenamiento del modelo final completado
2025-10-10 18:42:58,168 - INFO - __main__ 111 - Generar predicciones finales
2025-10-10 18:42:58,168 - INFO - src.final_training 130 - Generando predicciones finales
2025-10-10 18:43:00,739 - INFO - src.final_training 143 - Predicciones de probabilidad guardadas en: resultados/predicciones_probabilidad_lgb_optimization_cv_competencia01_f_2025-10-10_18-43-00.csv
2025-10-10 18:43:00,752 - INFO - src.final_training 165 - Predicciones generadas:
2025-10-10 18:43:00,752 - INFO - src.final_training 166 -   Total clientes: 164,313
2025-10-10 18:43:00,753 - INFO - src.final_training 167 -   Predicciones positivas: 13,996 (8.52%)
2025-10-10 18:43:00,753 - INFO - src.final_training 168 -   Predicciones negativas: 150,317
2025-10-10 18:43:00,753 - INFO - src.final_training 169 -   Porcentaje solicitado: 0.0852
2025-10-10 18:43:00,754 - INFO - __main__ 116 - Guardar predicciones
2025-10-10 18:43:00,851 - INFO - src.output_manager 42 - Predicciones guardadas en: predict/lgb_optimization_cv_competencia01_f_20251010_184300.csv
2025-10-10 18:43:00,851 - INFO - src.output_manager 43 - Formato del archivo:
2025-10-10 18:43:00,852 - INFO - src.output_manager 44 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-10 18:43:00,852 - INFO - src.output_manager 45 -   Registros: 164,313
2025-10-10 18:43:00,852 - INFO - src.output_manager 46 -   Primeras filas:
2025-10-10 18:43:00,888 - INFO - src.output_manager 47 -    numero_de_cliente  predict
0          249350768        0
1          249432306        0
2          249565688        0
3          249596175        0
4          249695645        1
2025-10-10 18:43:00,888 - INFO - __main__ 120 - === RESUMEN FINAL ===
2025-10-10 18:43:00,888 - INFO - __main__ 121 - ‚úÖ Entrenamiento final completado exitosamente
2025-10-10 18:43:00,889 - INFO - __main__ 122 - üìä Mejores hiperpar√°metros utilizados: {'num_iterations': 686, 'num_leaves': 147, 'learn_rate': 0.040186646399242805, 'feature_fraction': 0.9214278048493593, 'bagging_fraction': 0.5651151375185944, 'min_child_samples': 860, 'max_depth': 14, 'reg_lambda': 5.207999985706721, 'reg_alpha': 4.973695743989507, 'min_gain_to_split': 0.18861180071026387}
2025-10-10 18:43:00,889 - INFO - __main__ 123 - üéØ Per√≠odos de entrenamiento: ['202101', '202102', '202103', '202104']
2025-10-10 18:43:00,889 - INFO - __main__ 124 - üîÆ Per√≠odo de predicci√≥n: 202106
2025-10-10 18:43:00,889 - INFO - __main__ 127 - üìÅ Archivo de salida: predict/lgb_optimization_cv_competencia01_f_20251010_184300.csv
2025-10-10 18:43:00,890 - INFO - __main__ 128 - üìù Log detallado: logs/log_lgb_optimization_cv_competencia01_f_2025-10-10_18-15-21.log
2025-10-10 18:43:00,890 - INFO - __main__ 131 - >>> Ejecuci√≥n finalizada. Revisar logs para mas detalles.
