2025-10-10 23:48:49,544 - INFO - __main__ 37 - Inicio de ejecucion.
2025-10-10 23:48:49,545 - INFO - __main__ 39 - N√∫mero de trials por estudio: 2
2025-10-10 23:48:49,546 - INFO - __name__ 14 - Cargando dataset desde ./data/competencia_01.csv
2025-10-10 23:48:59,574 - INFO - __name__ 17 - Dataset cargado con 978439 filas y 155 columnas
2025-10-10 23:48:59,576 - INFO - __main__ 49 - Archivo de features encontrado: data/df_fe_lgb_optimization_cv_competencia01_i.csv. Cargando desde disco.
2025-10-10 23:50:29,051 - INFO - __main__ 56 - Feature Engineering completado: (978439, 725)
2025-10-10 23:50:32,290 - INFO - __name__ 101 - Conversi√≥n completada:
2025-10-10 23:50:32,292 - INFO - __name__ 102 -   Original - CONTINUA: 642830, BAJA+1: 4575, BAJA+2: 3938
2025-10-10 23:50:32,293 - INFO - __name__ 103 -   Binario - 0: 642830, 1: 8513
2025-10-10 23:50:32,293 - INFO - __name__ 104 -   Distribuci√≥n: 1.31% casos positivos
2025-10-10 23:50:32,896 - INFO - src.optimization_cv 286 - Iniciando optimizaci√≥n con CV - 2 trials
2025-10-10 23:50:32,897 - INFO - src.optimization_cv 287 - Configuraci√≥n CV: per√≠odos=['202102', '202103']
2025-10-10 23:51:41,636 - INFO - src.optimization_cv 261 - Trial 0: Ganancia CV = 97,024,589 ¬± 7,239,432 
2025-10-10 23:51:41,638 - INFO - src.optimization_cv 262 - Trial 0: Mejor iteraci√≥n en CV: 94 
2025-10-10 23:51:41,649 - INFO - src.optimization_cv 149 - Iteraci√≥n 0 guardada. Ganancia promedio CV: 97,024,589 
2025-10-10 23:53:06,504 - INFO - src.optimization_cv 261 - Trial 1: Ganancia CV = 112,933,556 ¬± 5,611,428 
2025-10-10 23:53:06,511 - INFO - src.optimization_cv 262 - Trial 1: Mejor iteraci√≥n en CV: 71 
2025-10-10 23:53:06,522 - INFO - src.optimization_cv 149 - Iteraci√≥n 1 guardada. Ganancia promedio CV: 112,933,556 
2025-10-10 23:53:07,281 - INFO - src.optimization_cv 300 - === OPTIMIZACI√ìN CON CV COMPLETADA ===
2025-10-10 23:53:07,285 - INFO - src.optimization_cv 301 - N√∫mero de trials completados: 2
2025-10-10 23:53:07,286 - INFO - src.optimization_cv 302 - Mejor ganancia promedio = 112,933,556
2025-10-10 23:53:07,286 - INFO - src.optimization_cv 303 - Mejores par√°metros: {'num_iterations': 344, 'num_leaves': 645, 'learn_rate': 0.13156347997055867, 'feature_fraction': 0.8188068950952062, 'bagging_fraction': 0.5457564018563776, 'min_child_samples': 1463, 'max_depth': 9, 'reg_lambda': 5.508788538431802, 'reg_alpha': 3.694532280936714, 'min_gain_to_split': 0.0018247196500845054}
2025-10-10 23:53:07,287 - INFO - __main__ 68 - === AN√ÅLISIS DE RESULTADOS ===
2025-10-10 23:53:07,431 - INFO - __main__ 72 - Top 5 mejores trials:
2025-10-10 23:53:07,441 - INFO - __main__ 74 -   Trial 1: 112,933,556
2025-10-10 23:53:07,442 - INFO - __main__ 74 -   Trial 0: 97,024,589
2025-10-10 23:53:07,443 - INFO - __main__ 76 - === OPTIMIZACI√ìN COMPLETADA ===
2025-10-10 23:53:07,443 - INFO - __main__ 79 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-10 23:53:07,445 - INFO - src.best_params 34 - Mejores hiperpar√°metros cargados desde resultados/lgb_optimization_cv_competencia01_i_iteraciones.json
2025-10-10 23:53:07,445 - INFO - src.best_params 35 - Mejor ganancia encontrada: 112,933,556
2025-10-10 23:53:07,446 - INFO - src.best_params 36 - Trial n√∫mero: 1
2025-10-10 23:53:07,446 - INFO - src.best_params 37 - Par√°metros: {'num_iterations': 344, 'num_leaves': 645, 'learn_rate': 0.13156347997055867, 'feature_fraction': 0.8188068950952062, 'bagging_fraction': 0.5457564018563776, 'min_child_samples': 1463, 'max_depth': 9, 'reg_lambda': 5.508788538431802, 'reg_alpha': 3.694532280936714, 'min_gain_to_split': 0.0018247196500845054}
2025-10-10 23:53:07,447 - INFO - src.optimization 448 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-10 23:53:07,447 - INFO - src.optimization 449 - Per√≠odo de test: 202104
2025-10-10 23:53:19,235 - INFO - src.optimization 461 - Entrenando modelo con mejores hiperpar√°metros...
2025-10-10 23:53:19,236 - INFO - src.optimization 462 - Dimensiones df_train_completo: (325264, 726), Dimensiones df_test: (163418, 726)
2025-10-10 23:53:20,304 - INFO - src.optimization 471 - Tipo de dato de train_data: <class 'lightgbm.basic.Dataset'>, Dimensiones de train_data: (325264, 724)
2025-10-10 23:54:25,455 - INFO - src.optimization 430 - Ganancia: 356,980,000---Total Predicciones positivas: 7,951
2025-10-10 23:54:25,462 - INFO - __main__ 90 - === RESUMEN DE EVALUACI√ìN EN TEST ===
2025-10-10 23:54:25,462 - INFO - __main__ 91 - ‚úÖ Ganancia en test: 356,980,000
2025-10-10 23:54:25,463 - INFO - __main__ 92 - üîç Umbral √≥ptimo encontrado: 0.0650
2025-10-10 23:54:25,463 - INFO - __main__ 93 - üéØ Predicciones positivas: 7,951 (4.87%)
2025-10-10 23:54:25,463 - INFO - __main__ 97 - === ENTRENAMIENTO FINAL ===
2025-10-10 23:54:25,463 - INFO - __main__ 98 - Preparar datos para entrenamiento final
2025-10-10 23:54:25,464 - INFO - src.final_training 296 - Preparando datos para entrenamiento final
2025-10-10 23:54:25,464 - INFO - src.final_training 297 - Per√≠odos de entrenamiento: ['202101', '202102', '202103', '202104']
2025-10-10 23:54:25,464 - INFO - src.final_training 298 - Per√≠odo de predicci√≥n: 202106
2025-10-10 23:54:36,528 - INFO - src.final_training 308 - Registros de entrenamiento: 650,209
2025-10-10 23:54:36,529 - INFO - src.final_training 309 - Registros de predicci√≥n: 164,313
2025-10-10 23:54:57,719 - INFO - src.final_training 327 - Features utilizadas: 724
2025-10-10 23:54:57,746 - INFO - src.final_training 328 - Distribuci√≥n del target - 0: 642,830, 1: 7,379
2025-10-10 23:54:58,253 - INFO - __main__ 110 - Entrenar modelo final
2025-10-10 23:54:58,255 - INFO - src.final_training 187 - Iniciando entrenamiento del modelo final
2025-10-10 23:54:58,262 - INFO - src.final_training 198 - Par√°metros del modelo: {'objective': 'binary', 'metric': 'None', 'random_state': 839071, 'verbose': -1, 'num_iterations': 344, 'num_leaves': 645, 'learn_rate': 0.13156347997055867, 'feature_fraction': 0.8188068950952062, 'bagging_fraction': 0.5457564018563776, 'min_child_samples': 1463, 'max_depth': 9, 'reg_lambda': 5.508788538431802, 'reg_alpha': 3.694532280936714, 'min_gain_to_split': 0.0018247196500845054}
2025-10-10 23:56:57,856 - INFO - src.final_training 223 - Modelo final guardado en: resultados/modelo_final_lgb_optimization_cv_competencia01_i_2025-10-10_23-56-57.txt
2025-10-10 23:56:57,857 - INFO - src.final_training 225 - Entrenamiento del modelo final completado
2025-10-10 23:56:57,985 - INFO - __main__ 115 - Generar predicciones finales
2025-10-10 23:56:57,986 - INFO - src.final_training 241 - Generando predicciones finales
2025-10-10 23:57:00,440 - INFO - src.final_training 254 - Predicciones de probabilidad guardadas en: resultados/predicciones_probabilidad_lgb_optimization_cv_competencia01_i_2025-10-10_23-57-00.csv
2025-10-10 23:57:00,451 - INFO - src.final_training 276 - Predicciones generadas:
2025-10-10 23:57:00,452 - INFO - src.final_training 277 -   Total clientes: 164,313
2025-10-10 23:57:00,452 - INFO - src.final_training 278 -   Predicciones positivas: 7,995 (4.87%)
2025-10-10 23:57:00,452 - INFO - src.final_training 279 -   Predicciones negativas: 156,318
2025-10-10 23:57:00,452 - INFO - src.final_training 280 -   Porcentaje solicitado: 0.0487
2025-10-10 23:57:00,453 - INFO - __main__ 120 - Guardar predicciones
2025-10-10 23:57:00,552 - INFO - src.output_manager 42 - Predicciones guardadas en: predict/lgb_optimization_cv_competencia01_i_20251010_235700.csv
2025-10-10 23:57:00,553 - INFO - src.output_manager 43 - Formato del archivo:
2025-10-10 23:57:00,553 - INFO - src.output_manager 44 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-10 23:57:00,553 - INFO - src.output_manager 45 -   Registros: 164,313
2025-10-10 23:57:00,554 - INFO - src.output_manager 46 -   Primeras filas:
2025-10-10 23:57:00,592 - INFO - src.output_manager 47 -    numero_de_cliente  predict
0          249350768        0
1          249432306        0
2          249565688        0
3          249596175        0
4          249695645        0
2025-10-10 23:57:00,592 - INFO - __main__ 124 - === RESUMEN FINAL ===
2025-10-10 23:57:00,592 - INFO - __main__ 125 - ‚úÖ Entrenamiento final completado exitosamente
2025-10-10 23:57:00,593 - INFO - __main__ 126 - üìä Mejores hiperpar√°metros utilizados: {'num_iterations': 344, 'num_leaves': 645, 'learn_rate': 0.13156347997055867, 'feature_fraction': 0.8188068950952062, 'bagging_fraction': 0.5457564018563776, 'min_child_samples': 1463, 'max_depth': 9, 'reg_lambda': 5.508788538431802, 'reg_alpha': 3.694532280936714, 'min_gain_to_split': 0.0018247196500845054}
2025-10-10 23:57:00,593 - INFO - __main__ 127 - üéØ Per√≠odos de entrenamiento: ['202101', '202102', '202103', '202104']
2025-10-10 23:57:00,593 - INFO - __main__ 128 - üîÆ Per√≠odo de predicci√≥n: 202106
2025-10-10 23:57:00,594 - INFO - __main__ 131 - üìÅ Archivo de salida: predict/lgb_optimization_cv_competencia01_i_20251010_235700.csv
2025-10-10 23:57:00,594 - INFO - __main__ 132 - üìù Log detallado: logs/log_lgb_optimization_cv_competencia01_i_2025-10-10_23-48-49.log
2025-10-10 23:57:00,594 - INFO - __main__ 135 - >>> Ejecuci√≥n finalizada. Revisar logs para mas detalles.
